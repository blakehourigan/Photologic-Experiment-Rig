<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>experiment_process_data API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="index.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;
                Module Index
            </a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#logger">logger</a>
            </li>
            <li>
                    <a class="class" href="#ExperimentProcessData">ExperimentProcessData</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ExperimentProcessData.__init__">ExperimentProcessData</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.start_time">start_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.trial_start_time">trial_start_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.state_start_time">state_start_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.current_trial_number">current_trial_number</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.event_data">event_data</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.stimuli_data">stimuli_data</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.arduino_data">arduino_data</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.ITI_intervals_final">ITI_intervals_final</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.TTC_intervals_final">TTC_intervals_final</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.sample_intervals_final">sample_intervals_final</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.TTC_LICK_THRESHOLD">TTC_LICK_THRESHOLD</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.interval_vars">interval_vars</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.update_model">update_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.get_default_value">get_default_value</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.generate_schedule">generate_schedule</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.create_random_intervals">create_random_intervals</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.calculate_max_runtime">calculate_max_runtime</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.create_trial_blocks">create_trial_blocks</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.generate_pairs">generate_pairs</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.build_frame">build_frame</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.save_all_data">save_all_data</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.get_paired_index">get_paired_index</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.save_df_to_xlsx">save_df_to_xlsx</a>
                        </li>
                        <li>
                                <a class="function" href="#ExperimentProcessData.convert_seconds_to_minutes_seconds">convert_seconds_to_minutes_seconds</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
experiment_process_data    </h1>

                        <div class="docstring"><p>This module defines the ExperimentProcessData class, which serves as the central
data management hub for the Photologic-Experiment-Rig application.</p>

<p>It aggregates references to other data-holding classes (<code>StimuliData</code>, <code>EventData</code>,
<code>ArduinoData</code>) and manages core experimental parameters like current trial,
state time durations, and the overall experiment schedule DataFrame. It provides
methods for generating the experimental schedule, updating parameters from the GUI,
calculating runtime, and saving collected data.</p>
</div>

                        <input id="mod-experiment_process_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-experiment_process_data-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">This module defines the ExperimentProcessData class, which serves as the central</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">data management hub for the Photologic-Experiment-Rig application.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">It aggregates references to other data-holding classes (`StimuliData`, `EventData`,</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">`ArduinoData`) and manages core experimental parameters like current trial,</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">state time durations, and the overall experiment schedule DataFrame. It provides</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">methods for generating the experimental schedule, updating parameters from the GUI,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">calculating runtime, and saving collected data.</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="kn">import</span> <span class="n">filedialog</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">models.stimuli_data</span><span class="w"> </span><span class="kn">import</span> <span class="n">StimuliData</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">models.event_data</span><span class="w"> </span><span class="kn">import</span> <span class="n">EventData</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">models.arduino_data</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArduinoData</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">views.gui_common</span><span class="w"> </span><span class="kn">import</span> <span class="n">GUIUtils</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ExperimentProcessData</span><span class="p">:</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    Central data management class for the behavioral experiment.</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">    This class acts as the primary container and manager for all data related</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    to an ongoing experiment. It holds references to specialized data classes</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    (`EventData`, `StimuliData`, `ArduinoData`) and maintains experiment-wide</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    state variables, timing intervals, parameter entries (num_stimuli for example), and the generated</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    program schedule (`program_schedule_df`). It performs the generation</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    of the trial schedule and state intervals based on user inputs.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">    Attributes</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    ----------</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    - **`start_time`** (*float*): Timestamp marking the absolute start of the program run.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">    - **`trial_start_time`** (*float*): Timestamp marking the start of the current trial.</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    - **`state_start_time`** (*float*): Timestamp marking the entry into the current FSM state.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    - **`current_trial_number`** (*int*): The 1-indexed number of the trial currently in progress or about to start.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    - **`event_data`** (*EventData*): Instance managing the DataFrame of recorded lick/motor events.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">    - **`stimuli_data`** (*StimuliData*): Instance managing stimuli names and related information.</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    - **`arduino_data`** (*ArduinoData*): Instance managing Arduino communication data (durations, schedule indices) and processing incoming Arduino messages.</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    - **`ITI_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Inter-Trial Interval duration (ms) for each trial.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    - **`TTC_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Time-To-Contact duration (ms) for each trial.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">    - **`sample_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Sample period duration (ms) for each trial.</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">    - **`TTC_LICK_THRESHOLD`** (*int*): The number of licks required during the TTC state to trigger an early transition to the SAMPLE state.</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">    - **`interval_vars`** (*dict[str, int]*): Dictionary storing base and random variation values (ms) for timing intervals (ITI, TTC, Sample), sourced from GUI entries.</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    - **`exp_var_entries`** (*dict[str, int]*): Dictionary storing core experiment parameters (Num Trial Blocks, Num Stimuli), sourced from GUI entries.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">    `Num Trials` is calculated based on these other values.</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">    - **`program_schedule_df`** (*pd.DataFrame*): Pandas DataFrame holding the generated trial-by-trial schedule, including stimuli presentation, calculated intervals,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">    and placeholders for results. Initialized empty.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">    Methods</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    -------</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    - `update_model`(...)</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">        Updates internal parameter dictionaries (`interval_vars`, `exp_var_entries`) based on changes from GUI input fields (tkinter vars).</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    - `get_default_value`(...)</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        Retrieves the default or current value for a given parameter name from internal dictionaries, used to populate GUI fields initially.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    - `generate_schedule`()</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        Performs the creation of the entire experimental schedule, including intervals and stimuli pairings. Returns status.</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">    - `create_random_intervals`()</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        Calculates the final ITI, TTC, and Sample intervals for each trial based on base values and randomization ranges.</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    - `calculate_max_runtime`()</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">        Estimates the maximum possible runtime based on the sum of all generated intervals.</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    - `create_trial_blocks`()</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        Determines the unique pairs of stimuli presented within a single block based on the number of stimuli.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    - `generate_pairs`(...)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">        Generates the pseudo-randomized sequence of stimuli pairs across all trials and blocks.</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    - `build_frame`(...)</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">        Constructs the `program_schedule_df` DataFrame using the generated stimuli sequences and intervals.</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">    - `save_all_data`()</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">        Initiates the process of saving the schedule and event log DataFrames to Excel files.</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">    - `get_paired_index`(...)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">        Static method to determine the 0-indexed valve number on the opposite side corresponding to a given valve index on side one.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">    - `save_df_to_xlsx`(...)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">        Static method to handle saving a pandas DataFrame to an .xlsx file using a file dialog.</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">    - `convert_seconds_to_minutes_seconds`(...)</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">        Static method to convert a total number of seconds into minutes and remaining seconds.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        Initializes the ExperimentProcessData central data hub.</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">        Sets initial timestamps to 0.0, starts `current_trial_number` at 1.</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        Instantiates `EventData`, `StimuliData`, and `ArduinoData` (passing self reference).</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        Initializes interval arrays (`ITI_intervals_final`, etc.) to None.</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">        Sets the `TTC_LICK_THRESHOLD`.</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        Defines default values for `interval_vars` and `exp_var_entries`.</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">        Initializes `program_schedule_df` as an empty DataFrame.</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trial_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="c1"># this number is centralized here so that all state classes can access and update it easily without</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="c1"># passing it through to each state every time a state change occurs</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_trial_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span> <span class="o">=</span> <span class="n">EventData</span><span class="p">()</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span> <span class="o">=</span> <span class="n">StimuliData</span><span class="p">()</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">arduino_data</span> <span class="o">=</span> <span class="n">ArduinoData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="c1"># this constant should be used in arduino_data to say how many licks moves to sample</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_LICK_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>            <span class="s2">&quot;ITI_var&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>            <span class="s2">&quot;TTC_var&quot;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>            <span class="s2">&quot;sample_var&quot;</span><span class="p">:</span> <span class="mi">15000</span><span class="p">,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>            <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>            <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>            <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="p">}</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>            <span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>            <span class="s2">&quot;Num Stimuli&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>            <span class="s2">&quot;Num Trials&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="p">}</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="c1"># include an initial definition of program_schedule_df here as a blank df to avoid type errors and to</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="c1"># make it clear that this is a class attriute</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">        Updates internal parameter dictionaries from GUI inputs.</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        Checks if the `variable_name` corresponds to a key in `interval_vars` or</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        `exp_var_entries` and updates the dictionary value if the provided `value`</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">        is not None.</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        Parameters</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        ----------</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the variable being updated (should match a dictionary key).</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        - **value** (*int | None*): The new integer value for the variable, or None if the input was invalid/empty.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="c1"># if the variable name for the tkinter entry item that we are updating is</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>        <span class="c1"># in the exp_data interval variables dictionary, update that entry</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="c1"># with the value in the tkinter variable</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>            <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>            <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>                <span class="c1"># update other var types here</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        Retrieves the current value associated with a parameter name.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">        Searches `interval_vars` and `exp_var_entries` for the `variable_name`.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">        Used primarily to populate GUI fields with their initial/default values.</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">        Parameters</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        ----------</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the parameter whose value is requested.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        Returns</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">        -------</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        - *int*: The integer value associated with `variable_name` in the dictionaries, or -1 if the name is not found.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>            <span class="c1"># update other var types here</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>        <span class="c1"># couldn&#39;t find the value, return -1 as error code</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_schedule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        Generates the complete pseudo-randomized experimental schedule.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        Calculates the total number of trials based on stimuli count and block count.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        Validates the number of stimuli. Calls helper methods:</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        - `create_random_intervals`() to determine ITI, TTC, Sample times per trial.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        - `create_trial_blocks`() to define unique stimuli pairs that must occur per block.</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        - `generate_pairs`() to create the trial-by-trial stimuli sequence.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        - `build_frame`() to assemble the final `program_schedule_df`.</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        Returns</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        -------</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        - *bool*: `True` if schedule generation was successful, `False` if an error occurred (e.g., invalid number of stimuli).</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="c1"># set number of trials based on number of stimuli, and number of trial blocks set by user</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>            <span class="k">if</span> <span class="n">num_stimuli</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>                <span class="n">GUIUtils</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>                    <span class="s2">&quot;NUMBER OF STIMULI EXCEEDS CURRENT MAXIMUM&quot;</span><span class="p">,</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>                    <span class="s2">&quot;Program is currently configured for a minumim of 2 and maximum of 8 TOTAL vavles. You must have an even number of valves. If more are desired, program configuration must be modified.&quot;</span><span class="p">,</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>                <span class="p">)</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>            <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_trial_blocks</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_random_intervals</span><span class="p">()</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_trial_blocks</span><span class="p">()</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>            <span class="c1"># stimuli_1 &amp; stimuli_2 are lists that hold the stimuli to be introduced for each trial on their respective side</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>            <span class="n">stimuli_side_one</span><span class="p">,</span> <span class="n">stimuli_side_two</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_pairs</span><span class="p">(</span><span class="n">pairs</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>            <span class="c1"># args needed -&gt; stimuli_1, stimuli_2</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>            <span class="c1"># these are lists of stimuli for each trial, for each side respectivelyc:w</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_frame</span><span class="p">(</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>                <span class="n">stimuli_side_one</span><span class="p">,</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>                <span class="n">stimuli_side_two</span><span class="p">,</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>            <span class="p">)</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating program schedule </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_random_intervals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">        Calculates randomized ITI, TTC, and Sample intervals for all trials.</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">        For each interval type (ITI, TTC, Sample):</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        - Retrieves the base duration and random variation range from `interval_vars`.</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        - Creates a base array repeating the base duration for the total number of trials.</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        - If random variation is specified, generates an array of random integers within the +/- range.</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        - Adds the random variation array to the base array.</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        - Stores the resulting final interval array in the corresponding class attribute (`ITI_intervals_final`, etc.).</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">        Raises</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">        ------</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">        - Propagates NumPy errors (e.g., during random number generation or array addition).</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `interval_vars`.</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>            <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>            <span class="n">final_intervals</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>            <span class="n">interval_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ITI_var&quot;</span><span class="p">,</span> <span class="s2">&quot;TTC_var&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_var&quot;</span><span class="p">]</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>            <span class="n">random_interval_keys</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>                <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">,</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>                <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">,</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>                <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">,</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="p">]</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>            <span class="c1"># for each type of interval (iti, ttc, sample), generate final interval times</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">interval_keys</span><span class="p">)):</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>                <span class="n">base_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>                <span class="c1"># this makes an array that is n=num_trials length of base_val</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>                <span class="n">base_intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">base_val</span><span class="p">,</span> <span class="n">num_trials</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>                <span class="c1"># get plus minus value for this interval type</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>                <span class="n">random_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">random_interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>                <span class="k">if</span> <span class="n">random_var</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>                    <span class="c1"># if there is no value to add/subtract randomly, continue on</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_intervals</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>                    <span class="c1"># otherwise make num_trials amount of random integers and add them to the final_intervals</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>                    <span class="n">random_interval_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>                        <span class="o">-</span><span class="n">random_var</span><span class="p">,</span> <span class="n">random_var</span><span class="p">,</span> <span class="n">num_trials</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>                    <span class="p">)</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">base_intervals</span><span class="p">,</span> <span class="n">random_interval_arr</span><span class="p">)</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="c1"># assign results for respective types to the model for storage and later use</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Random intervals created.&quot;</span><span class="p">)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating random intervals: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>            <span class="k">raise</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_max_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">        Estimates the maximum possible experiment runtime in minutes and seconds.</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">        Sums all generated interval durations (ITI, TTC, Sample) across all trials.</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">        Converts the total milliseconds to seconds, then uses `convert_seconds_to_minutes_seconds`.</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">        Returns</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        -------</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (estimated_max_minutes, estimated_max_seconds).</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>        <span class="n">max_time</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">)</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">)</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">)</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>        <span class="p">)</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">max_time</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_trial_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">        Determines the unique stimuli pairings within a single trial block.</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        Calculates the number of pairs per block (`block_sz = num_stimuli / 2`).</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        Iterates from `i = 0` to `block_sz - 1`. For each `i`, finds the</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        corresponding paired valve index using `get_paired_index`. Appends the</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">        tuple of (stimulus_name_at_i, stimulus_name_at_paired_index) to a list.</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">        Returns</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">        -------</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">        - *List[tuple]*: A list of tuples, where each tuple represents a unique stimuli pairing (e.g., `[(&#39;Odor A&#39;, &#39;Odor B&#39;), (&#39;Odor C&#39;, &#39;Odor D&#39;)]`).</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">        Raises</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">        ------</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">        - Propagates errors from `get_paired_index`.</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `exp_var_entries`.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a><span class="sd">        - *IndexError*: If calculated indices are out of bounds for `stimuli_data.stimuli_vars`.</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>            <span class="c1"># creating pairs list which stores all possible pairs</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>            <span class="n">block_sz</span> <span class="o">=</span> <span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>            <span class="n">stimuli_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span><span class="o">.</span><span class="n">stimuli_vars</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">block_sz</span><span class="p">):</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>                <span class="n">pair_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">)</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>                <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">stimuli_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">stimuli_names</span><span class="p">[</span><span class="n">pair_index</span><span class="p">]))</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>            <span class="k">return</span> <span class="n">pairs</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating trial blocks: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="k">raise</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">        Generates the full, pseudo-randomized sequence of stimuli pairs for all trials.</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        Repeats the following for the number of trial blocks specified:</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">        - Takes the list of unique `pairs` generated by `create_trial_blocks` that must be included in each block.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">        - Shuffles this list randomly (`np.random.shuffle`).</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">        - Extends a master list `pseudo_random_lineup` (adds new list to that list) with the shuffled block.</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">        After creating the full sequence, separates it into two lists: one for the</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">        stimulus presented on side one each trial, and one for side two.</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">        Parameters</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        ----------</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">        - **pairs** (*List[tuple[str, str]]*): The list of unique stimuli pairings defining one block, generated by `create_trial_blocks`.</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">        Returns</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">        -------</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">        - *Tuple[list, list]*: A tuple containing two lists:</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">            - `stimulus_1`: List of stimuli names for Port 1 for each trial.</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">            - `stimulus_2`: List of stimuli names for Port 2 for each trial.</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">        Raises</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">        ------</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">        - Propagates errors from `np.random.shuffle`.</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>            <span class="n">pseudo_random_lineup</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>            <span class="n">stimulus_1</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>            <span class="n">stimulus_2</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]):</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>                <span class="n">pairs_copy</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">]</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>                <span class="n">pseudo_random_lineup</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pseudo_random_lineup</span><span class="p">:</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>                <span class="n">stimulus_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>                <span class="n">stimulus_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>            <span class="k">return</span> <span class="n">stimulus_1</span><span class="p">,</span> <span class="n">stimulus_2</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating pairs: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>            <span class="k">raise</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_frame</span><span class="p">(</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="n">stimuli_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>        <span class="n">stimuli_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">        Constructs the main `program_schedule_df` pandas DataFrame.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">        Uses the generated stimuli sequences (`stimuli_1`, `stimuli_2`) and the</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">        calculated interval arrays (`ITI_intervals_final`, etc.) to build the</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        DataFrame. Includes columns for trial block number, trial number, stimuli</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">        per port, calculated intervals, and placeholders (NaN) for results columns</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">        like lick counts and actual TTC duration.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">        Parameters</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">        ----------</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">        - **stimuli_1** (*list*): List of stimuli names for Port 1, one per trial.</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        - **stimuli_2** (*list*): List of stimuli names for Port 2, one per trial.</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">        Raises</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="sd">        ------</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">        - Propagates pandas errors during DataFrame creation.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a><span class="sd">        - *ValueError*: If the lengths of input lists/arrays do not match the expected number of trials.</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>        <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>        <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>        <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>        <span class="c1"># each block must contain each PAIR -&gt; num pairs = num_stim / 2</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="n">block_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stimuli</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>                <span class="s2">&quot;Trial Block&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>                    <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trial_blocks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>                    <span class="n">block_size</span><span class="p">,</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>                <span class="p">),</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>                <span class="s2">&quot;Trial Number&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trials</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>                <span class="s2">&quot;Port 1&quot;</span><span class="p">:</span> <span class="n">stimuli_1</span><span class="p">,</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>                <span class="s2">&quot;Port 2&quot;</span><span class="p">:</span> <span class="n">stimuli_2</span><span class="p">,</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>                <span class="s2">&quot;Port 1 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>                <span class="s2">&quot;Port 2 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>                <span class="s2">&quot;ITI&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">,</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>                <span class="s2">&quot;TTC&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">,</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>                <span class="s2">&quot;SAMPLE&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">,</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>                <span class="s2">&quot;TTC Actual&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>            <span class="p">}</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initialized stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Building Stimuli Frame: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>            <span class="k">raise</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        Saves the experiment schedule and detailed event log DataFrames to Excel files.</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">        Iterates through a dictionary mapping descriptive names to the DataFrame</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">        references (`program_schedule_df`, `event_data.event_dataframe`) and calls</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">        the static `save_df_to_xlsx` method for each.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>        <span class="n">dataframes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>            <span class="s2">&quot;Experiment Schedule&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span><span class="p">,</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>            <span class="s2">&quot;Detailed Event Log Data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span><span class="o">.</span><span class="n">event_dataframe</span><span class="p">,</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>        <span class="p">}</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span> <span class="ow">in</span> <span class="n">dataframes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="sd">        Calculates the 0-indexed valve number for the stimulus for side two based on give index (i) for side one.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">        Based on the total number of stimuli (`num_stimuli`), determines the index</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="sd">        of the valve paired with the valve at index `i`. Handles cases for 2, 4, or 8 total stimuli.</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        Parameters</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">        ----------</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">        - **i** (*int*): The 0-indexed number of the valve on one side.</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">        - **num_stimuli** (*int*): The total number of stimuli/valves being used (must be 2, 4, or 8).</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">        Returns</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">        -------</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        - *int | None*: The 0-indexed number of the paired valve, or None if `num_stimuli` is not 2, 4, or 8.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>        <span class="k">match</span> <span class="n">num_stimuli</span><span class="p">:</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>            <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>                <span class="c1"># if num stim is 2, we are only running the same stimulus on both sides,</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>                <span class="c1"># we will only see i=0 here, and its paired with its sibling i=4</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>                <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">4</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>            <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>                <span class="c1"># if num stim is 4, we are only running 2 stimuli per side,</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                <span class="c1"># we will see i=0 and i =1 here, paired with siblings i=5 &amp; i=4 respectively</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># valve 1</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>  <span class="c1"># (5) / valve 6</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># valve 2</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># (4) / valve 5</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>            <span class="k">case</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>                    <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>                    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>                <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        Saves a pandas DataFrame to an Excel (.xlsx) file using a file save dialog.</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        Prompts the user with a standard &#39;Save As&#39; dialog window. Suggests a default</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a><span class="sd">        filename including the provided `name` and the current date. Sets the default</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="sd">        directory to &#39;../data_outputs&#39;. If the user confirms a filename, saves the</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="sd">        DataFrame; otherwise, logs that the save was cancelled.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">        Parameters</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">        ----------</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">        - **name** (*str*): A descriptive name used in the default filename (e.g., &quot;Experiment Schedule&quot;).</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">        - **dataframe** (*pd.DataFrame*): The pandas DataFrame to be saved.</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">        Raises</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">        ------</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">        - Propagates errors from `filedialog.asksaveasfilename` or `dataframe.to_excel`.</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>            <span class="n">file_name</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>                <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.xlsx&quot;</span><span class="p">,</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>                <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Excel Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.xlsx&quot;</span><span class="p">)],</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>                <span class="n">initialfile</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>                <span class="n">initialdir</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>                <span class="o">/</span> <span class="s2">&quot;data_outputs&quot;</span><span class="p">,</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save Excel file&quot;</span><span class="p">,</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>            <span class="p">)</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>            <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>                <span class="n">dataframe</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User cancelled saving the stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Data saved to xlsx files.&quot;</span><span class="p">)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving data to xlsx: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>            <span class="k">raise</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a><span class="sd">        Converts a total number of seconds into whole minutes and remaining seconds.</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">        Parameters</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        ----------</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">        - **total_seconds** (*int*): The total duration in seconds.</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a><span class="sd">        Returns</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a><span class="sd">        -------</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (minutes, seconds).</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a><span class="sd">        Raises</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a><span class="sd">        ------</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a><span class="sd">        - Propagates `TypeError` if `total_seconds` is not a number.</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>            <span class="c1"># Integer division to get whole minutes</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>            <span class="n">minutes</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">//</span> <span class="mi">60</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>            <span class="c1"># Modulo to get remaining seconds</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>            <span class="n">seconds</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">%</span> <span class="mi">60</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>            <span class="k">return</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error converting seconds to minutes and seconds: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>            <span class="k">raise</span>
</span></pre></div>


            </section>
                <section id="logger">
                    <div class="attr variable">
            <span class="name">logger</span>        =
<span class="default_value">&lt;Logger experiment_process_data (INFO)&gt;</span>

        
    </div>
    <a class="headerlink" href="#logger"></a>
    
    

                </section>
                <section id="ExperimentProcessData">
                            <input id="ExperimentProcessData-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ExperimentProcessData</span>:

                <label class="view-source-button" for="ExperimentProcessData-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData-29"><a href="#ExperimentProcessData-29"><span class="linenos"> 29</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ExperimentProcessData</span><span class="p">:</span>
</span><span id="ExperimentProcessData-30"><a href="#ExperimentProcessData-30"><span class="linenos"> 30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-31"><a href="#ExperimentProcessData-31"><span class="linenos"> 31</span></a><span class="sd">    Central data management class for the behavioral experiment.</span>
</span><span id="ExperimentProcessData-32"><a href="#ExperimentProcessData-32"><span class="linenos"> 32</span></a>
</span><span id="ExperimentProcessData-33"><a href="#ExperimentProcessData-33"><span class="linenos"> 33</span></a><span class="sd">    This class acts as the primary container and manager for all data related</span>
</span><span id="ExperimentProcessData-34"><a href="#ExperimentProcessData-34"><span class="linenos"> 34</span></a><span class="sd">    to an ongoing experiment. It holds references to specialized data classes</span>
</span><span id="ExperimentProcessData-35"><a href="#ExperimentProcessData-35"><span class="linenos"> 35</span></a><span class="sd">    (`EventData`, `StimuliData`, `ArduinoData`) and maintains experiment-wide</span>
</span><span id="ExperimentProcessData-36"><a href="#ExperimentProcessData-36"><span class="linenos"> 36</span></a><span class="sd">    state variables, timing intervals, parameter entries (num_stimuli for example), and the generated</span>
</span><span id="ExperimentProcessData-37"><a href="#ExperimentProcessData-37"><span class="linenos"> 37</span></a><span class="sd">    program schedule (`program_schedule_df`). It performs the generation</span>
</span><span id="ExperimentProcessData-38"><a href="#ExperimentProcessData-38"><span class="linenos"> 38</span></a><span class="sd">    of the trial schedule and state intervals based on user inputs.</span>
</span><span id="ExperimentProcessData-39"><a href="#ExperimentProcessData-39"><span class="linenos"> 39</span></a>
</span><span id="ExperimentProcessData-40"><a href="#ExperimentProcessData-40"><span class="linenos"> 40</span></a><span class="sd">    Attributes</span>
</span><span id="ExperimentProcessData-41"><a href="#ExperimentProcessData-41"><span class="linenos"> 41</span></a><span class="sd">    ----------</span>
</span><span id="ExperimentProcessData-42"><a href="#ExperimentProcessData-42"><span class="linenos"> 42</span></a><span class="sd">    - **`start_time`** (*float*): Timestamp marking the absolute start of the program run.</span>
</span><span id="ExperimentProcessData-43"><a href="#ExperimentProcessData-43"><span class="linenos"> 43</span></a><span class="sd">    - **`trial_start_time`** (*float*): Timestamp marking the start of the current trial.</span>
</span><span id="ExperimentProcessData-44"><a href="#ExperimentProcessData-44"><span class="linenos"> 44</span></a><span class="sd">    - **`state_start_time`** (*float*): Timestamp marking the entry into the current FSM state.</span>
</span><span id="ExperimentProcessData-45"><a href="#ExperimentProcessData-45"><span class="linenos"> 45</span></a><span class="sd">    - **`current_trial_number`** (*int*): The 1-indexed number of the trial currently in progress or about to start.</span>
</span><span id="ExperimentProcessData-46"><a href="#ExperimentProcessData-46"><span class="linenos"> 46</span></a><span class="sd">    - **`event_data`** (*EventData*): Instance managing the DataFrame of recorded lick/motor events.</span>
</span><span id="ExperimentProcessData-47"><a href="#ExperimentProcessData-47"><span class="linenos"> 47</span></a><span class="sd">    - **`stimuli_data`** (*StimuliData*): Instance managing stimuli names and related information.</span>
</span><span id="ExperimentProcessData-48"><a href="#ExperimentProcessData-48"><span class="linenos"> 48</span></a><span class="sd">    - **`arduino_data`** (*ArduinoData*): Instance managing Arduino communication data (durations, schedule indices) and processing incoming Arduino messages.</span>
</span><span id="ExperimentProcessData-49"><a href="#ExperimentProcessData-49"><span class="linenos"> 49</span></a><span class="sd">    - **`ITI_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Inter-Trial Interval duration (ms) for each trial.</span>
</span><span id="ExperimentProcessData-50"><a href="#ExperimentProcessData-50"><span class="linenos"> 50</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="ExperimentProcessData-51"><a href="#ExperimentProcessData-51"><span class="linenos"> 51</span></a><span class="sd">    - **`TTC_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Time-To-Contact duration (ms) for each trial.</span>
</span><span id="ExperimentProcessData-52"><a href="#ExperimentProcessData-52"><span class="linenos"> 52</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="ExperimentProcessData-53"><a href="#ExperimentProcessData-53"><span class="linenos"> 53</span></a><span class="sd">    - **`sample_intervals_final`** (*npt.NDArray[np.int64] | None*): Numpy array holding the calculated Sample period duration (ms) for each trial.</span>
</span><span id="ExperimentProcessData-54"><a href="#ExperimentProcessData-54"><span class="linenos"> 54</span></a><span class="sd">    None until schedule generated.</span>
</span><span id="ExperimentProcessData-55"><a href="#ExperimentProcessData-55"><span class="linenos"> 55</span></a><span class="sd">    - **`TTC_LICK_THRESHOLD`** (*int*): The number of licks required during the TTC state to trigger an early transition to the SAMPLE state.</span>
</span><span id="ExperimentProcessData-56"><a href="#ExperimentProcessData-56"><span class="linenos"> 56</span></a><span class="sd">    - **`interval_vars`** (*dict[str, int]*): Dictionary storing base and random variation values (ms) for timing intervals (ITI, TTC, Sample), sourced from GUI entries.</span>
</span><span id="ExperimentProcessData-57"><a href="#ExperimentProcessData-57"><span class="linenos"> 57</span></a><span class="sd">    - **`exp_var_entries`** (*dict[str, int]*): Dictionary storing core experiment parameters (Num Trial Blocks, Num Stimuli), sourced from GUI entries.</span>
</span><span id="ExperimentProcessData-58"><a href="#ExperimentProcessData-58"><span class="linenos"> 58</span></a><span class="sd">    `Num Trials` is calculated based on these other values.</span>
</span><span id="ExperimentProcessData-59"><a href="#ExperimentProcessData-59"><span class="linenos"> 59</span></a><span class="sd">    - **`program_schedule_df`** (*pd.DataFrame*): Pandas DataFrame holding the generated trial-by-trial schedule, including stimuli presentation, calculated intervals,</span>
</span><span id="ExperimentProcessData-60"><a href="#ExperimentProcessData-60"><span class="linenos"> 60</span></a><span class="sd">    and placeholders for results. Initialized empty.</span>
</span><span id="ExperimentProcessData-61"><a href="#ExperimentProcessData-61"><span class="linenos"> 61</span></a>
</span><span id="ExperimentProcessData-62"><a href="#ExperimentProcessData-62"><span class="linenos"> 62</span></a><span class="sd">    Methods</span>
</span><span id="ExperimentProcessData-63"><a href="#ExperimentProcessData-63"><span class="linenos"> 63</span></a><span class="sd">    -------</span>
</span><span id="ExperimentProcessData-64"><a href="#ExperimentProcessData-64"><span class="linenos"> 64</span></a><span class="sd">    - `update_model`(...)</span>
</span><span id="ExperimentProcessData-65"><a href="#ExperimentProcessData-65"><span class="linenos"> 65</span></a><span class="sd">        Updates internal parameter dictionaries (`interval_vars`, `exp_var_entries`) based on changes from GUI input fields (tkinter vars).</span>
</span><span id="ExperimentProcessData-66"><a href="#ExperimentProcessData-66"><span class="linenos"> 66</span></a><span class="sd">    - `get_default_value`(...)</span>
</span><span id="ExperimentProcessData-67"><a href="#ExperimentProcessData-67"><span class="linenos"> 67</span></a><span class="sd">        Retrieves the default or current value for a given parameter name from internal dictionaries, used to populate GUI fields initially.</span>
</span><span id="ExperimentProcessData-68"><a href="#ExperimentProcessData-68"><span class="linenos"> 68</span></a><span class="sd">    - `generate_schedule`()</span>
</span><span id="ExperimentProcessData-69"><a href="#ExperimentProcessData-69"><span class="linenos"> 69</span></a><span class="sd">        Performs the creation of the entire experimental schedule, including intervals and stimuli pairings. Returns status.</span>
</span><span id="ExperimentProcessData-70"><a href="#ExperimentProcessData-70"><span class="linenos"> 70</span></a><span class="sd">    - `create_random_intervals`()</span>
</span><span id="ExperimentProcessData-71"><a href="#ExperimentProcessData-71"><span class="linenos"> 71</span></a><span class="sd">        Calculates the final ITI, TTC, and Sample intervals for each trial based on base values and randomization ranges.</span>
</span><span id="ExperimentProcessData-72"><a href="#ExperimentProcessData-72"><span class="linenos"> 72</span></a><span class="sd">    - `calculate_max_runtime`()</span>
</span><span id="ExperimentProcessData-73"><a href="#ExperimentProcessData-73"><span class="linenos"> 73</span></a><span class="sd">        Estimates the maximum possible runtime based on the sum of all generated intervals.</span>
</span><span id="ExperimentProcessData-74"><a href="#ExperimentProcessData-74"><span class="linenos"> 74</span></a><span class="sd">    - `create_trial_blocks`()</span>
</span><span id="ExperimentProcessData-75"><a href="#ExperimentProcessData-75"><span class="linenos"> 75</span></a><span class="sd">        Determines the unique pairs of stimuli presented within a single block based on the number of stimuli.</span>
</span><span id="ExperimentProcessData-76"><a href="#ExperimentProcessData-76"><span class="linenos"> 76</span></a><span class="sd">    - `generate_pairs`(...)</span>
</span><span id="ExperimentProcessData-77"><a href="#ExperimentProcessData-77"><span class="linenos"> 77</span></a><span class="sd">        Generates the pseudo-randomized sequence of stimuli pairs across all trials and blocks.</span>
</span><span id="ExperimentProcessData-78"><a href="#ExperimentProcessData-78"><span class="linenos"> 78</span></a><span class="sd">    - `build_frame`(...)</span>
</span><span id="ExperimentProcessData-79"><a href="#ExperimentProcessData-79"><span class="linenos"> 79</span></a><span class="sd">        Constructs the `program_schedule_df` DataFrame using the generated stimuli sequences and intervals.</span>
</span><span id="ExperimentProcessData-80"><a href="#ExperimentProcessData-80"><span class="linenos"> 80</span></a><span class="sd">    - `save_all_data`()</span>
</span><span id="ExperimentProcessData-81"><a href="#ExperimentProcessData-81"><span class="linenos"> 81</span></a><span class="sd">        Initiates the process of saving the schedule and event log DataFrames to Excel files.</span>
</span><span id="ExperimentProcessData-82"><a href="#ExperimentProcessData-82"><span class="linenos"> 82</span></a><span class="sd">    - `get_paired_index`(...)</span>
</span><span id="ExperimentProcessData-83"><a href="#ExperimentProcessData-83"><span class="linenos"> 83</span></a><span class="sd">        Static method to determine the 0-indexed valve number on the opposite side corresponding to a given valve index on side one.</span>
</span><span id="ExperimentProcessData-84"><a href="#ExperimentProcessData-84"><span class="linenos"> 84</span></a><span class="sd">    - `save_df_to_xlsx`(...)</span>
</span><span id="ExperimentProcessData-85"><a href="#ExperimentProcessData-85"><span class="linenos"> 85</span></a><span class="sd">        Static method to handle saving a pandas DataFrame to an .xlsx file using a file dialog.</span>
</span><span id="ExperimentProcessData-86"><a href="#ExperimentProcessData-86"><span class="linenos"> 86</span></a><span class="sd">    - `convert_seconds_to_minutes_seconds`(...)</span>
</span><span id="ExperimentProcessData-87"><a href="#ExperimentProcessData-87"><span class="linenos"> 87</span></a><span class="sd">        Static method to convert a total number of seconds into minutes and remaining seconds.</span>
</span><span id="ExperimentProcessData-88"><a href="#ExperimentProcessData-88"><span class="linenos"> 88</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-89"><a href="#ExperimentProcessData-89"><span class="linenos"> 89</span></a>
</span><span id="ExperimentProcessData-90"><a href="#ExperimentProcessData-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExperimentProcessData-91"><a href="#ExperimentProcessData-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-92"><a href="#ExperimentProcessData-92"><span class="linenos"> 92</span></a><span class="sd">        Initializes the ExperimentProcessData central data hub.</span>
</span><span id="ExperimentProcessData-93"><a href="#ExperimentProcessData-93"><span class="linenos"> 93</span></a>
</span><span id="ExperimentProcessData-94"><a href="#ExperimentProcessData-94"><span class="linenos"> 94</span></a><span class="sd">        Sets initial timestamps to 0.0, starts `current_trial_number` at 1.</span>
</span><span id="ExperimentProcessData-95"><a href="#ExperimentProcessData-95"><span class="linenos"> 95</span></a><span class="sd">        Instantiates `EventData`, `StimuliData`, and `ArduinoData` (passing self reference).</span>
</span><span id="ExperimentProcessData-96"><a href="#ExperimentProcessData-96"><span class="linenos"> 96</span></a><span class="sd">        Initializes interval arrays (`ITI_intervals_final`, etc.) to None.</span>
</span><span id="ExperimentProcessData-97"><a href="#ExperimentProcessData-97"><span class="linenos"> 97</span></a><span class="sd">        Sets the `TTC_LICK_THRESHOLD`.</span>
</span><span id="ExperimentProcessData-98"><a href="#ExperimentProcessData-98"><span class="linenos"> 98</span></a><span class="sd">        Defines default values for `interval_vars` and `exp_var_entries`.</span>
</span><span id="ExperimentProcessData-99"><a href="#ExperimentProcessData-99"><span class="linenos"> 99</span></a><span class="sd">        Initializes `program_schedule_df` as an empty DataFrame.</span>
</span><span id="ExperimentProcessData-100"><a href="#ExperimentProcessData-100"><span class="linenos">100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-101"><a href="#ExperimentProcessData-101"><span class="linenos">101</span></a>
</span><span id="ExperimentProcessData-102"><a href="#ExperimentProcessData-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData-103"><a href="#ExperimentProcessData-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trial_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData-104"><a href="#ExperimentProcessData-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData-105"><a href="#ExperimentProcessData-105"><span class="linenos">105</span></a>
</span><span id="ExperimentProcessData-106"><a href="#ExperimentProcessData-106"><span class="linenos">106</span></a>        <span class="c1"># this number is centralized here so that all state classes can access and update it easily without</span>
</span><span id="ExperimentProcessData-107"><a href="#ExperimentProcessData-107"><span class="linenos">107</span></a>        <span class="c1"># passing it through to each state every time a state change occurs</span>
</span><span id="ExperimentProcessData-108"><a href="#ExperimentProcessData-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_trial_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ExperimentProcessData-109"><a href="#ExperimentProcessData-109"><span class="linenos">109</span></a>
</span><span id="ExperimentProcessData-110"><a href="#ExperimentProcessData-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span> <span class="o">=</span> <span class="n">EventData</span><span class="p">()</span>
</span><span id="ExperimentProcessData-111"><a href="#ExperimentProcessData-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span> <span class="o">=</span> <span class="n">StimuliData</span><span class="p">()</span>
</span><span id="ExperimentProcessData-112"><a href="#ExperimentProcessData-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">arduino_data</span> <span class="o">=</span> <span class="n">ArduinoData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ExperimentProcessData-113"><a href="#ExperimentProcessData-113"><span class="linenos">113</span></a>
</span><span id="ExperimentProcessData-114"><a href="#ExperimentProcessData-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData-115"><a href="#ExperimentProcessData-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData-116"><a href="#ExperimentProcessData-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData-117"><a href="#ExperimentProcessData-117"><span class="linenos">117</span></a>
</span><span id="ExperimentProcessData-118"><a href="#ExperimentProcessData-118"><span class="linenos">118</span></a>        <span class="c1"># this constant should be used in arduino_data to say how many licks moves to sample</span>
</span><span id="ExperimentProcessData-119"><a href="#ExperimentProcessData-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_LICK_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData-120"><a href="#ExperimentProcessData-120"><span class="linenos">120</span></a>
</span><span id="ExperimentProcessData-121"><a href="#ExperimentProcessData-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData-122"><a href="#ExperimentProcessData-122"><span class="linenos">122</span></a>            <span class="s2">&quot;ITI_var&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
</span><span id="ExperimentProcessData-123"><a href="#ExperimentProcessData-123"><span class="linenos">123</span></a>            <span class="s2">&quot;TTC_var&quot;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
</span><span id="ExperimentProcessData-124"><a href="#ExperimentProcessData-124"><span class="linenos">124</span></a>            <span class="s2">&quot;sample_var&quot;</span><span class="p">:</span> <span class="mi">15000</span><span class="p">,</span>
</span><span id="ExperimentProcessData-125"><a href="#ExperimentProcessData-125"><span class="linenos">125</span></a>            <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ExperimentProcessData-126"><a href="#ExperimentProcessData-126"><span class="linenos">126</span></a>            <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="ExperimentProcessData-127"><a href="#ExperimentProcessData-127"><span class="linenos">127</span></a>            <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="ExperimentProcessData-128"><a href="#ExperimentProcessData-128"><span class="linenos">128</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData-129"><a href="#ExperimentProcessData-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData-130"><a href="#ExperimentProcessData-130"><span class="linenos">130</span></a>            <span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="ExperimentProcessData-131"><a href="#ExperimentProcessData-131"><span class="linenos">131</span></a>            <span class="s2">&quot;Num Stimuli&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="ExperimentProcessData-132"><a href="#ExperimentProcessData-132"><span class="linenos">132</span></a>            <span class="s2">&quot;Num Trials&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ExperimentProcessData-133"><a href="#ExperimentProcessData-133"><span class="linenos">133</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData-134"><a href="#ExperimentProcessData-134"><span class="linenos">134</span></a>
</span><span id="ExperimentProcessData-135"><a href="#ExperimentProcessData-135"><span class="linenos">135</span></a>        <span class="c1"># include an initial definition of program_schedule_df here as a blank df to avoid type errors and to</span>
</span><span id="ExperimentProcessData-136"><a href="#ExperimentProcessData-136"><span class="linenos">136</span></a>        <span class="c1"># make it clear that this is a class attriute</span>
</span><span id="ExperimentProcessData-137"><a href="#ExperimentProcessData-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="ExperimentProcessData-138"><a href="#ExperimentProcessData-138"><span class="linenos">138</span></a>
</span><span id="ExperimentProcessData-139"><a href="#ExperimentProcessData-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-140"><a href="#ExperimentProcessData-140"><span class="linenos">140</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-141"><a href="#ExperimentProcessData-141"><span class="linenos">141</span></a><span class="sd">        Updates internal parameter dictionaries from GUI inputs.</span>
</span><span id="ExperimentProcessData-142"><a href="#ExperimentProcessData-142"><span class="linenos">142</span></a>
</span><span id="ExperimentProcessData-143"><a href="#ExperimentProcessData-143"><span class="linenos">143</span></a><span class="sd">        Checks if the `variable_name` corresponds to a key in `interval_vars` or</span>
</span><span id="ExperimentProcessData-144"><a href="#ExperimentProcessData-144"><span class="linenos">144</span></a><span class="sd">        `exp_var_entries` and updates the dictionary value if the provided `value`</span>
</span><span id="ExperimentProcessData-145"><a href="#ExperimentProcessData-145"><span class="linenos">145</span></a><span class="sd">        is not None.</span>
</span><span id="ExperimentProcessData-146"><a href="#ExperimentProcessData-146"><span class="linenos">146</span></a>
</span><span id="ExperimentProcessData-147"><a href="#ExperimentProcessData-147"><span class="linenos">147</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-148"><a href="#ExperimentProcessData-148"><span class="linenos">148</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-149"><a href="#ExperimentProcessData-149"><span class="linenos">149</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the variable being updated (should match a dictionary key).</span>
</span><span id="ExperimentProcessData-150"><a href="#ExperimentProcessData-150"><span class="linenos">150</span></a><span class="sd">        - **value** (*int | None*): The new integer value for the variable, or None if the input was invalid/empty.</span>
</span><span id="ExperimentProcessData-151"><a href="#ExperimentProcessData-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-152"><a href="#ExperimentProcessData-152"><span class="linenos">152</span></a>
</span><span id="ExperimentProcessData-153"><a href="#ExperimentProcessData-153"><span class="linenos">153</span></a>        <span class="c1"># if the variable name for the tkinter entry item that we are updating is</span>
</span><span id="ExperimentProcessData-154"><a href="#ExperimentProcessData-154"><span class="linenos">154</span></a>        <span class="c1"># in the exp_data interval variables dictionary, update that entry</span>
</span><span id="ExperimentProcessData-155"><a href="#ExperimentProcessData-155"><span class="linenos">155</span></a>        <span class="c1"># with the value in the tkinter variable</span>
</span><span id="ExperimentProcessData-156"><a href="#ExperimentProcessData-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-157"><a href="#ExperimentProcessData-157"><span class="linenos">157</span></a>            <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData-158"><a href="#ExperimentProcessData-158"><span class="linenos">158</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="ExperimentProcessData-159"><a href="#ExperimentProcessData-159"><span class="linenos">159</span></a>            <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData-160"><a href="#ExperimentProcessData-160"><span class="linenos">160</span></a>                <span class="c1"># update other var types here</span>
</span><span id="ExperimentProcessData-161"><a href="#ExperimentProcessData-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="ExperimentProcessData-162"><a href="#ExperimentProcessData-162"><span class="linenos">162</span></a>
</span><span id="ExperimentProcessData-163"><a href="#ExperimentProcessData-163"><span class="linenos">163</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="ExperimentProcessData-164"><a href="#ExperimentProcessData-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-165"><a href="#ExperimentProcessData-165"><span class="linenos">165</span></a><span class="sd">        Retrieves the current value associated with a parameter name.</span>
</span><span id="ExperimentProcessData-166"><a href="#ExperimentProcessData-166"><span class="linenos">166</span></a>
</span><span id="ExperimentProcessData-167"><a href="#ExperimentProcessData-167"><span class="linenos">167</span></a><span class="sd">        Searches `interval_vars` and `exp_var_entries` for the `variable_name`.</span>
</span><span id="ExperimentProcessData-168"><a href="#ExperimentProcessData-168"><span class="linenos">168</span></a><span class="sd">        Used primarily to populate GUI fields with their initial/default values.</span>
</span><span id="ExperimentProcessData-169"><a href="#ExperimentProcessData-169"><span class="linenos">169</span></a>
</span><span id="ExperimentProcessData-170"><a href="#ExperimentProcessData-170"><span class="linenos">170</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-171"><a href="#ExperimentProcessData-171"><span class="linenos">171</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-172"><a href="#ExperimentProcessData-172"><span class="linenos">172</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the parameter whose value is requested.</span>
</span><span id="ExperimentProcessData-173"><a href="#ExperimentProcessData-173"><span class="linenos">173</span></a>
</span><span id="ExperimentProcessData-174"><a href="#ExperimentProcessData-174"><span class="linenos">174</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-175"><a href="#ExperimentProcessData-175"><span class="linenos">175</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-176"><a href="#ExperimentProcessData-176"><span class="linenos">176</span></a><span class="sd">        - *int*: The integer value associated with `variable_name` in the dictionaries, or -1 if the name is not found.</span>
</span><span id="ExperimentProcessData-177"><a href="#ExperimentProcessData-177"><span class="linenos">177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-178"><a href="#ExperimentProcessData-178"><span class="linenos">178</span></a>        <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData-179"><a href="#ExperimentProcessData-179"><span class="linenos">179</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="ExperimentProcessData-180"><a href="#ExperimentProcessData-180"><span class="linenos">180</span></a>        <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData-181"><a href="#ExperimentProcessData-181"><span class="linenos">181</span></a>            <span class="c1"># update other var types here</span>
</span><span id="ExperimentProcessData-182"><a href="#ExperimentProcessData-182"><span class="linenos">182</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="ExperimentProcessData-183"><a href="#ExperimentProcessData-183"><span class="linenos">183</span></a>
</span><span id="ExperimentProcessData-184"><a href="#ExperimentProcessData-184"><span class="linenos">184</span></a>        <span class="c1"># couldn&#39;t find the value, return -1 as error code</span>
</span><span id="ExperimentProcessData-185"><a href="#ExperimentProcessData-185"><span class="linenos">185</span></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="ExperimentProcessData-186"><a href="#ExperimentProcessData-186"><span class="linenos">186</span></a>
</span><span id="ExperimentProcessData-187"><a href="#ExperimentProcessData-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_schedule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExperimentProcessData-188"><a href="#ExperimentProcessData-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-189"><a href="#ExperimentProcessData-189"><span class="linenos">189</span></a><span class="sd">        Generates the complete pseudo-randomized experimental schedule.</span>
</span><span id="ExperimentProcessData-190"><a href="#ExperimentProcessData-190"><span class="linenos">190</span></a>
</span><span id="ExperimentProcessData-191"><a href="#ExperimentProcessData-191"><span class="linenos">191</span></a><span class="sd">        Calculates the total number of trials based on stimuli count and block count.</span>
</span><span id="ExperimentProcessData-192"><a href="#ExperimentProcessData-192"><span class="linenos">192</span></a><span class="sd">        Validates the number of stimuli. Calls helper methods:</span>
</span><span id="ExperimentProcessData-193"><a href="#ExperimentProcessData-193"><span class="linenos">193</span></a><span class="sd">        - `create_random_intervals`() to determine ITI, TTC, Sample times per trial.</span>
</span><span id="ExperimentProcessData-194"><a href="#ExperimentProcessData-194"><span class="linenos">194</span></a><span class="sd">        - `create_trial_blocks`() to define unique stimuli pairs that must occur per block.</span>
</span><span id="ExperimentProcessData-195"><a href="#ExperimentProcessData-195"><span class="linenos">195</span></a><span class="sd">        - `generate_pairs`() to create the trial-by-trial stimuli sequence.</span>
</span><span id="ExperimentProcessData-196"><a href="#ExperimentProcessData-196"><span class="linenos">196</span></a><span class="sd">        - `build_frame`() to assemble the final `program_schedule_df`.</span>
</span><span id="ExperimentProcessData-197"><a href="#ExperimentProcessData-197"><span class="linenos">197</span></a>
</span><span id="ExperimentProcessData-198"><a href="#ExperimentProcessData-198"><span class="linenos">198</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-199"><a href="#ExperimentProcessData-199"><span class="linenos">199</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-200"><a href="#ExperimentProcessData-200"><span class="linenos">200</span></a><span class="sd">        - *bool*: `True` if schedule generation was successful, `False` if an error occurred (e.g., invalid number of stimuli).</span>
</span><span id="ExperimentProcessData-201"><a href="#ExperimentProcessData-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-202"><a href="#ExperimentProcessData-202"><span class="linenos">202</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-203"><a href="#ExperimentProcessData-203"><span class="linenos">203</span></a>            <span class="c1"># set number of trials based on number of stimuli, and number of trial blocks set by user</span>
</span><span id="ExperimentProcessData-204"><a href="#ExperimentProcessData-204"><span class="linenos">204</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-205"><a href="#ExperimentProcessData-205"><span class="linenos">205</span></a>
</span><span id="ExperimentProcessData-206"><a href="#ExperimentProcessData-206"><span class="linenos">206</span></a>            <span class="k">if</span> <span class="n">num_stimuli</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData-207"><a href="#ExperimentProcessData-207"><span class="linenos">207</span></a>                <span class="n">GUIUtils</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span>
</span><span id="ExperimentProcessData-208"><a href="#ExperimentProcessData-208"><span class="linenos">208</span></a>                    <span class="s2">&quot;NUMBER OF STIMULI EXCEEDS CURRENT MAXIMUM&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-209"><a href="#ExperimentProcessData-209"><span class="linenos">209</span></a>                    <span class="s2">&quot;Program is currently configured for a minumim of 2 and maximum of 8 TOTAL vavles. You must have an even number of valves. If more are desired, program configuration must be modified.&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-210"><a href="#ExperimentProcessData-210"><span class="linenos">210</span></a>                <span class="p">)</span>
</span><span id="ExperimentProcessData-211"><a href="#ExperimentProcessData-211"><span class="linenos">211</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="ExperimentProcessData-212"><a href="#ExperimentProcessData-212"><span class="linenos">212</span></a>
</span><span id="ExperimentProcessData-213"><a href="#ExperimentProcessData-213"><span class="linenos">213</span></a>            <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-214"><a href="#ExperimentProcessData-214"><span class="linenos">214</span></a>
</span><span id="ExperimentProcessData-215"><a href="#ExperimentProcessData-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_trial_blocks</span>
</span><span id="ExperimentProcessData-216"><a href="#ExperimentProcessData-216"><span class="linenos">216</span></a>
</span><span id="ExperimentProcessData-217"><a href="#ExperimentProcessData-217"><span class="linenos">217</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_random_intervals</span><span class="p">()</span>
</span><span id="ExperimentProcessData-218"><a href="#ExperimentProcessData-218"><span class="linenos">218</span></a>
</span><span id="ExperimentProcessData-219"><a href="#ExperimentProcessData-219"><span class="linenos">219</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_trial_blocks</span><span class="p">()</span>
</span><span id="ExperimentProcessData-220"><a href="#ExperimentProcessData-220"><span class="linenos">220</span></a>
</span><span id="ExperimentProcessData-221"><a href="#ExperimentProcessData-221"><span class="linenos">221</span></a>            <span class="c1"># stimuli_1 &amp; stimuli_2 are lists that hold the stimuli to be introduced for each trial on their respective side</span>
</span><span id="ExperimentProcessData-222"><a href="#ExperimentProcessData-222"><span class="linenos">222</span></a>            <span class="n">stimuli_side_one</span><span class="p">,</span> <span class="n">stimuli_side_two</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_pairs</span><span class="p">(</span><span class="n">pairs</span><span class="p">)</span>
</span><span id="ExperimentProcessData-223"><a href="#ExperimentProcessData-223"><span class="linenos">223</span></a>
</span><span id="ExperimentProcessData-224"><a href="#ExperimentProcessData-224"><span class="linenos">224</span></a>            <span class="c1"># args needed -&gt; stimuli_1, stimuli_2</span>
</span><span id="ExperimentProcessData-225"><a href="#ExperimentProcessData-225"><span class="linenos">225</span></a>            <span class="c1"># these are lists of stimuli for each trial, for each side respectivelyc:w</span>
</span><span id="ExperimentProcessData-226"><a href="#ExperimentProcessData-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_frame</span><span class="p">(</span>
</span><span id="ExperimentProcessData-227"><a href="#ExperimentProcessData-227"><span class="linenos">227</span></a>                <span class="n">stimuli_side_one</span><span class="p">,</span>
</span><span id="ExperimentProcessData-228"><a href="#ExperimentProcessData-228"><span class="linenos">228</span></a>                <span class="n">stimuli_side_two</span><span class="p">,</span>
</span><span id="ExperimentProcessData-229"><a href="#ExperimentProcessData-229"><span class="linenos">229</span></a>            <span class="p">)</span>
</span><span id="ExperimentProcessData-230"><a href="#ExperimentProcessData-230"><span class="linenos">230</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExperimentProcessData-231"><a href="#ExperimentProcessData-231"><span class="linenos">231</span></a>
</span><span id="ExperimentProcessData-232"><a href="#ExperimentProcessData-232"><span class="linenos">232</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-233"><a href="#ExperimentProcessData-233"><span class="linenos">233</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating program schedule </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-234"><a href="#ExperimentProcessData-234"><span class="linenos">234</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="ExperimentProcessData-235"><a href="#ExperimentProcessData-235"><span class="linenos">235</span></a>
</span><span id="ExperimentProcessData-236"><a href="#ExperimentProcessData-236"><span class="linenos">236</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_random_intervals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-237"><a href="#ExperimentProcessData-237"><span class="linenos">237</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-238"><a href="#ExperimentProcessData-238"><span class="linenos">238</span></a><span class="sd">        Calculates randomized ITI, TTC, and Sample intervals for all trials.</span>
</span><span id="ExperimentProcessData-239"><a href="#ExperimentProcessData-239"><span class="linenos">239</span></a>
</span><span id="ExperimentProcessData-240"><a href="#ExperimentProcessData-240"><span class="linenos">240</span></a><span class="sd">        For each interval type (ITI, TTC, Sample):</span>
</span><span id="ExperimentProcessData-241"><a href="#ExperimentProcessData-241"><span class="linenos">241</span></a><span class="sd">        - Retrieves the base duration and random variation range from `interval_vars`.</span>
</span><span id="ExperimentProcessData-242"><a href="#ExperimentProcessData-242"><span class="linenos">242</span></a><span class="sd">        - Creates a base array repeating the base duration for the total number of trials.</span>
</span><span id="ExperimentProcessData-243"><a href="#ExperimentProcessData-243"><span class="linenos">243</span></a><span class="sd">        - If random variation is specified, generates an array of random integers within the +/- range.</span>
</span><span id="ExperimentProcessData-244"><a href="#ExperimentProcessData-244"><span class="linenos">244</span></a><span class="sd">        - Adds the random variation array to the base array.</span>
</span><span id="ExperimentProcessData-245"><a href="#ExperimentProcessData-245"><span class="linenos">245</span></a><span class="sd">        - Stores the resulting final interval array in the corresponding class attribute (`ITI_intervals_final`, etc.).</span>
</span><span id="ExperimentProcessData-246"><a href="#ExperimentProcessData-246"><span class="linenos">246</span></a>
</span><span id="ExperimentProcessData-247"><a href="#ExperimentProcessData-247"><span class="linenos">247</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-248"><a href="#ExperimentProcessData-248"><span class="linenos">248</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-249"><a href="#ExperimentProcessData-249"><span class="linenos">249</span></a><span class="sd">        - Propagates NumPy errors (e.g., during random number generation or array addition).</span>
</span><span id="ExperimentProcessData-250"><a href="#ExperimentProcessData-250"><span class="linenos">250</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `interval_vars`.</span>
</span><span id="ExperimentProcessData-251"><a href="#ExperimentProcessData-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-252"><a href="#ExperimentProcessData-252"><span class="linenos">252</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-253"><a href="#ExperimentProcessData-253"><span class="linenos">253</span></a>            <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-254"><a href="#ExperimentProcessData-254"><span class="linenos">254</span></a>
</span><span id="ExperimentProcessData-255"><a href="#ExperimentProcessData-255"><span class="linenos">255</span></a>            <span class="n">final_intervals</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ExperimentProcessData-256"><a href="#ExperimentProcessData-256"><span class="linenos">256</span></a>
</span><span id="ExperimentProcessData-257"><a href="#ExperimentProcessData-257"><span class="linenos">257</span></a>            <span class="n">interval_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ITI_var&quot;</span><span class="p">,</span> <span class="s2">&quot;TTC_var&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_var&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-258"><a href="#ExperimentProcessData-258"><span class="linenos">258</span></a>
</span><span id="ExperimentProcessData-259"><a href="#ExperimentProcessData-259"><span class="linenos">259</span></a>            <span class="n">random_interval_keys</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ExperimentProcessData-260"><a href="#ExperimentProcessData-260"><span class="linenos">260</span></a>                <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-261"><a href="#ExperimentProcessData-261"><span class="linenos">261</span></a>                <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-262"><a href="#ExperimentProcessData-262"><span class="linenos">262</span></a>                <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-263"><a href="#ExperimentProcessData-263"><span class="linenos">263</span></a>            <span class="p">]</span>
</span><span id="ExperimentProcessData-264"><a href="#ExperimentProcessData-264"><span class="linenos">264</span></a>
</span><span id="ExperimentProcessData-265"><a href="#ExperimentProcessData-265"><span class="linenos">265</span></a>            <span class="c1"># for each type of interval (iti, ttc, sample), generate final interval times</span>
</span><span id="ExperimentProcessData-266"><a href="#ExperimentProcessData-266"><span class="linenos">266</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">interval_keys</span><span class="p">)):</span>
</span><span id="ExperimentProcessData-267"><a href="#ExperimentProcessData-267"><span class="linenos">267</span></a>                <span class="n">base_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="ExperimentProcessData-268"><a href="#ExperimentProcessData-268"><span class="linenos">268</span></a>                <span class="c1"># this makes an array that is n=num_trials length of base_val</span>
</span><span id="ExperimentProcessData-269"><a href="#ExperimentProcessData-269"><span class="linenos">269</span></a>                <span class="n">base_intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">base_val</span><span class="p">,</span> <span class="n">num_trials</span><span class="p">)</span>
</span><span id="ExperimentProcessData-270"><a href="#ExperimentProcessData-270"><span class="linenos">270</span></a>
</span><span id="ExperimentProcessData-271"><a href="#ExperimentProcessData-271"><span class="linenos">271</span></a>                <span class="c1"># get plus minus value for this interval type</span>
</span><span id="ExperimentProcessData-272"><a href="#ExperimentProcessData-272"><span class="linenos">272</span></a>                <span class="n">random_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">random_interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="ExperimentProcessData-273"><a href="#ExperimentProcessData-273"><span class="linenos">273</span></a>
</span><span id="ExperimentProcessData-274"><a href="#ExperimentProcessData-274"><span class="linenos">274</span></a>                <span class="k">if</span> <span class="n">random_var</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData-275"><a href="#ExperimentProcessData-275"><span class="linenos">275</span></a>                    <span class="c1"># if there is no value to add/subtract randomly, continue on</span>
</span><span id="ExperimentProcessData-276"><a href="#ExperimentProcessData-276"><span class="linenos">276</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_intervals</span>
</span><span id="ExperimentProcessData-277"><a href="#ExperimentProcessData-277"><span class="linenos">277</span></a>
</span><span id="ExperimentProcessData-278"><a href="#ExperimentProcessData-278"><span class="linenos">278</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ExperimentProcessData-279"><a href="#ExperimentProcessData-279"><span class="linenos">279</span></a>                    <span class="c1"># otherwise make num_trials amount of random integers and add them to the final_intervals</span>
</span><span id="ExperimentProcessData-280"><a href="#ExperimentProcessData-280"><span class="linenos">280</span></a>                    <span class="n">random_interval_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span>
</span><span id="ExperimentProcessData-281"><a href="#ExperimentProcessData-281"><span class="linenos">281</span></a>                        <span class="o">-</span><span class="n">random_var</span><span class="p">,</span> <span class="n">random_var</span><span class="p">,</span> <span class="n">num_trials</span>
</span><span id="ExperimentProcessData-282"><a href="#ExperimentProcessData-282"><span class="linenos">282</span></a>                    <span class="p">)</span>
</span><span id="ExperimentProcessData-283"><a href="#ExperimentProcessData-283"><span class="linenos">283</span></a>
</span><span id="ExperimentProcessData-284"><a href="#ExperimentProcessData-284"><span class="linenos">284</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">base_intervals</span><span class="p">,</span> <span class="n">random_interval_arr</span><span class="p">)</span>
</span><span id="ExperimentProcessData-285"><a href="#ExperimentProcessData-285"><span class="linenos">285</span></a>
</span><span id="ExperimentProcessData-286"><a href="#ExperimentProcessData-286"><span class="linenos">286</span></a>            <span class="c1"># assign results for respective types to the model for storage and later use</span>
</span><span id="ExperimentProcessData-287"><a href="#ExperimentProcessData-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ExperimentProcessData-288"><a href="#ExperimentProcessData-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ExperimentProcessData-289"><a href="#ExperimentProcessData-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="ExperimentProcessData-290"><a href="#ExperimentProcessData-290"><span class="linenos">290</span></a>
</span><span id="ExperimentProcessData-291"><a href="#ExperimentProcessData-291"><span class="linenos">291</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Random intervals created.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-292"><a href="#ExperimentProcessData-292"><span class="linenos">292</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-293"><a href="#ExperimentProcessData-293"><span class="linenos">293</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating random intervals: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-294"><a href="#ExperimentProcessData-294"><span class="linenos">294</span></a>            <span class="k">raise</span>
</span><span id="ExperimentProcessData-295"><a href="#ExperimentProcessData-295"><span class="linenos">295</span></a>
</span><span id="ExperimentProcessData-296"><a href="#ExperimentProcessData-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_max_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="ExperimentProcessData-297"><a href="#ExperimentProcessData-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-298"><a href="#ExperimentProcessData-298"><span class="linenos">298</span></a><span class="sd">        Estimates the maximum possible experiment runtime in minutes and seconds.</span>
</span><span id="ExperimentProcessData-299"><a href="#ExperimentProcessData-299"><span class="linenos">299</span></a>
</span><span id="ExperimentProcessData-300"><a href="#ExperimentProcessData-300"><span class="linenos">300</span></a><span class="sd">        Sums all generated interval durations (ITI, TTC, Sample) across all trials.</span>
</span><span id="ExperimentProcessData-301"><a href="#ExperimentProcessData-301"><span class="linenos">301</span></a><span class="sd">        Converts the total milliseconds to seconds, then uses `convert_seconds_to_minutes_seconds`.</span>
</span><span id="ExperimentProcessData-302"><a href="#ExperimentProcessData-302"><span class="linenos">302</span></a>
</span><span id="ExperimentProcessData-303"><a href="#ExperimentProcessData-303"><span class="linenos">303</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-304"><a href="#ExperimentProcessData-304"><span class="linenos">304</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-305"><a href="#ExperimentProcessData-305"><span class="linenos">305</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (estimated_max_minutes, estimated_max_seconds).</span>
</span><span id="ExperimentProcessData-306"><a href="#ExperimentProcessData-306"><span class="linenos">306</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-307"><a href="#ExperimentProcessData-307"><span class="linenos">307</span></a>        <span class="n">max_time</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ExperimentProcessData-308"><a href="#ExperimentProcessData-308"><span class="linenos">308</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData-309"><a href="#ExperimentProcessData-309"><span class="linenos">309</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData-310"><a href="#ExperimentProcessData-310"><span class="linenos">310</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData-311"><a href="#ExperimentProcessData-311"><span class="linenos">311</span></a>        <span class="p">)</span>
</span><span id="ExperimentProcessData-312"><a href="#ExperimentProcessData-312"><span class="linenos">312</span></a>        <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">max_time</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span><span id="ExperimentProcessData-313"><a href="#ExperimentProcessData-313"><span class="linenos">313</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>
</span><span id="ExperimentProcessData-314"><a href="#ExperimentProcessData-314"><span class="linenos">314</span></a>
</span><span id="ExperimentProcessData-315"><a href="#ExperimentProcessData-315"><span class="linenos">315</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_trial_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="ExperimentProcessData-316"><a href="#ExperimentProcessData-316"><span class="linenos">316</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-317"><a href="#ExperimentProcessData-317"><span class="linenos">317</span></a><span class="sd">        Determines the unique stimuli pairings within a single trial block.</span>
</span><span id="ExperimentProcessData-318"><a href="#ExperimentProcessData-318"><span class="linenos">318</span></a>
</span><span id="ExperimentProcessData-319"><a href="#ExperimentProcessData-319"><span class="linenos">319</span></a><span class="sd">        Calculates the number of pairs per block (`block_sz = num_stimuli / 2`).</span>
</span><span id="ExperimentProcessData-320"><a href="#ExperimentProcessData-320"><span class="linenos">320</span></a><span class="sd">        Iterates from `i = 0` to `block_sz - 1`. For each `i`, finds the</span>
</span><span id="ExperimentProcessData-321"><a href="#ExperimentProcessData-321"><span class="linenos">321</span></a><span class="sd">        corresponding paired valve index using `get_paired_index`. Appends the</span>
</span><span id="ExperimentProcessData-322"><a href="#ExperimentProcessData-322"><span class="linenos">322</span></a><span class="sd">        tuple of (stimulus_name_at_i, stimulus_name_at_paired_index) to a list.</span>
</span><span id="ExperimentProcessData-323"><a href="#ExperimentProcessData-323"><span class="linenos">323</span></a>
</span><span id="ExperimentProcessData-324"><a href="#ExperimentProcessData-324"><span class="linenos">324</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-325"><a href="#ExperimentProcessData-325"><span class="linenos">325</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-326"><a href="#ExperimentProcessData-326"><span class="linenos">326</span></a><span class="sd">        - *List[tuple]*: A list of tuples, where each tuple represents a unique stimuli pairing (e.g., `[(&#39;Odor A&#39;, &#39;Odor B&#39;), (&#39;Odor C&#39;, &#39;Odor D&#39;)]`).</span>
</span><span id="ExperimentProcessData-327"><a href="#ExperimentProcessData-327"><span class="linenos">327</span></a>
</span><span id="ExperimentProcessData-328"><a href="#ExperimentProcessData-328"><span class="linenos">328</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-329"><a href="#ExperimentProcessData-329"><span class="linenos">329</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-330"><a href="#ExperimentProcessData-330"><span class="linenos">330</span></a><span class="sd">        - Propagates errors from `get_paired_index`.</span>
</span><span id="ExperimentProcessData-331"><a href="#ExperimentProcessData-331"><span class="linenos">331</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `exp_var_entries`.</span>
</span><span id="ExperimentProcessData-332"><a href="#ExperimentProcessData-332"><span class="linenos">332</span></a><span class="sd">        - *IndexError*: If calculated indices are out of bounds for `stimuli_data.stimuli_vars`.</span>
</span><span id="ExperimentProcessData-333"><a href="#ExperimentProcessData-333"><span class="linenos">333</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-334"><a href="#ExperimentProcessData-334"><span class="linenos">334</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-335"><a href="#ExperimentProcessData-335"><span class="linenos">335</span></a>            <span class="c1"># creating pairs list which stores all possible pairs</span>
</span><span id="ExperimentProcessData-336"><a href="#ExperimentProcessData-336"><span class="linenos">336</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData-337"><a href="#ExperimentProcessData-337"><span class="linenos">337</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-338"><a href="#ExperimentProcessData-338"><span class="linenos">338</span></a>            <span class="n">block_sz</span> <span class="o">=</span> <span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="ExperimentProcessData-339"><a href="#ExperimentProcessData-339"><span class="linenos">339</span></a>
</span><span id="ExperimentProcessData-340"><a href="#ExperimentProcessData-340"><span class="linenos">340</span></a>            <span class="n">stimuli_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span><span class="o">.</span><span class="n">stimuli_vars</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="ExperimentProcessData-341"><a href="#ExperimentProcessData-341"><span class="linenos">341</span></a>
</span><span id="ExperimentProcessData-342"><a href="#ExperimentProcessData-342"><span class="linenos">342</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">block_sz</span><span class="p">):</span>
</span><span id="ExperimentProcessData-343"><a href="#ExperimentProcessData-343"><span class="linenos">343</span></a>                <span class="n">pair_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">)</span>
</span><span id="ExperimentProcessData-344"><a href="#ExperimentProcessData-344"><span class="linenos">344</span></a>                <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">stimuli_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">stimuli_names</span><span class="p">[</span><span class="n">pair_index</span><span class="p">]))</span>
</span><span id="ExperimentProcessData-345"><a href="#ExperimentProcessData-345"><span class="linenos">345</span></a>
</span><span id="ExperimentProcessData-346"><a href="#ExperimentProcessData-346"><span class="linenos">346</span></a>            <span class="k">return</span> <span class="n">pairs</span>
</span><span id="ExperimentProcessData-347"><a href="#ExperimentProcessData-347"><span class="linenos">347</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-348"><a href="#ExperimentProcessData-348"><span class="linenos">348</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating trial blocks: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-349"><a href="#ExperimentProcessData-349"><span class="linenos">349</span></a>            <span class="k">raise</span>
</span><span id="ExperimentProcessData-350"><a href="#ExperimentProcessData-350"><span class="linenos">350</span></a>
</span><span id="ExperimentProcessData-351"><a href="#ExperimentProcessData-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="ExperimentProcessData-352"><a href="#ExperimentProcessData-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-353"><a href="#ExperimentProcessData-353"><span class="linenos">353</span></a><span class="sd">        Generates the full, pseudo-randomized sequence of stimuli pairs for all trials.</span>
</span><span id="ExperimentProcessData-354"><a href="#ExperimentProcessData-354"><span class="linenos">354</span></a>
</span><span id="ExperimentProcessData-355"><a href="#ExperimentProcessData-355"><span class="linenos">355</span></a><span class="sd">        Repeats the following for the number of trial blocks specified:</span>
</span><span id="ExperimentProcessData-356"><a href="#ExperimentProcessData-356"><span class="linenos">356</span></a><span class="sd">        - Takes the list of unique `pairs` generated by `create_trial_blocks` that must be included in each block.</span>
</span><span id="ExperimentProcessData-357"><a href="#ExperimentProcessData-357"><span class="linenos">357</span></a><span class="sd">        - Shuffles this list randomly (`np.random.shuffle`).</span>
</span><span id="ExperimentProcessData-358"><a href="#ExperimentProcessData-358"><span class="linenos">358</span></a><span class="sd">        - Extends a master list `pseudo_random_lineup` (adds new list to that list) with the shuffled block.</span>
</span><span id="ExperimentProcessData-359"><a href="#ExperimentProcessData-359"><span class="linenos">359</span></a><span class="sd">        After creating the full sequence, separates it into two lists: one for the</span>
</span><span id="ExperimentProcessData-360"><a href="#ExperimentProcessData-360"><span class="linenos">360</span></a><span class="sd">        stimulus presented on side one each trial, and one for side two.</span>
</span><span id="ExperimentProcessData-361"><a href="#ExperimentProcessData-361"><span class="linenos">361</span></a>
</span><span id="ExperimentProcessData-362"><a href="#ExperimentProcessData-362"><span class="linenos">362</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-363"><a href="#ExperimentProcessData-363"><span class="linenos">363</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-364"><a href="#ExperimentProcessData-364"><span class="linenos">364</span></a><span class="sd">        - **pairs** (*List[tuple[str, str]]*): The list of unique stimuli pairings defining one block, generated by `create_trial_blocks`.</span>
</span><span id="ExperimentProcessData-365"><a href="#ExperimentProcessData-365"><span class="linenos">365</span></a>
</span><span id="ExperimentProcessData-366"><a href="#ExperimentProcessData-366"><span class="linenos">366</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-367"><a href="#ExperimentProcessData-367"><span class="linenos">367</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-368"><a href="#ExperimentProcessData-368"><span class="linenos">368</span></a><span class="sd">        - *Tuple[list, list]*: A tuple containing two lists:</span>
</span><span id="ExperimentProcessData-369"><a href="#ExperimentProcessData-369"><span class="linenos">369</span></a><span class="sd">            - `stimulus_1`: List of stimuli names for Port 1 for each trial.</span>
</span><span id="ExperimentProcessData-370"><a href="#ExperimentProcessData-370"><span class="linenos">370</span></a><span class="sd">            - `stimulus_2`: List of stimuli names for Port 2 for each trial.</span>
</span><span id="ExperimentProcessData-371"><a href="#ExperimentProcessData-371"><span class="linenos">371</span></a>
</span><span id="ExperimentProcessData-372"><a href="#ExperimentProcessData-372"><span class="linenos">372</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-373"><a href="#ExperimentProcessData-373"><span class="linenos">373</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-374"><a href="#ExperimentProcessData-374"><span class="linenos">374</span></a><span class="sd">        - Propagates errors from `np.random.shuffle`.</span>
</span><span id="ExperimentProcessData-375"><a href="#ExperimentProcessData-375"><span class="linenos">375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-376"><a href="#ExperimentProcessData-376"><span class="linenos">376</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-377"><a href="#ExperimentProcessData-377"><span class="linenos">377</span></a>            <span class="n">pseudo_random_lineup</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData-378"><a href="#ExperimentProcessData-378"><span class="linenos">378</span></a>
</span><span id="ExperimentProcessData-379"><a href="#ExperimentProcessData-379"><span class="linenos">379</span></a>            <span class="n">stimulus_1</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData-380"><a href="#ExperimentProcessData-380"><span class="linenos">380</span></a>            <span class="n">stimulus_2</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData-381"><a href="#ExperimentProcessData-381"><span class="linenos">381</span></a>
</span><span id="ExperimentProcessData-382"><a href="#ExperimentProcessData-382"><span class="linenos">382</span></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]):</span>
</span><span id="ExperimentProcessData-383"><a href="#ExperimentProcessData-383"><span class="linenos">383</span></a>                <span class="n">pairs_copy</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">]</span>
</span><span id="ExperimentProcessData-384"><a href="#ExperimentProcessData-384"><span class="linenos">384</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="ExperimentProcessData-385"><a href="#ExperimentProcessData-385"><span class="linenos">385</span></a>                <span class="n">pseudo_random_lineup</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="ExperimentProcessData-386"><a href="#ExperimentProcessData-386"><span class="linenos">386</span></a>
</span><span id="ExperimentProcessData-387"><a href="#ExperimentProcessData-387"><span class="linenos">387</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pseudo_random_lineup</span><span class="p">:</span>
</span><span id="ExperimentProcessData-388"><a href="#ExperimentProcessData-388"><span class="linenos">388</span></a>                <span class="n">stimulus_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="ExperimentProcessData-389"><a href="#ExperimentProcessData-389"><span class="linenos">389</span></a>                <span class="n">stimulus_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ExperimentProcessData-390"><a href="#ExperimentProcessData-390"><span class="linenos">390</span></a>
</span><span id="ExperimentProcessData-391"><a href="#ExperimentProcessData-391"><span class="linenos">391</span></a>            <span class="k">return</span> <span class="n">stimulus_1</span><span class="p">,</span> <span class="n">stimulus_2</span>
</span><span id="ExperimentProcessData-392"><a href="#ExperimentProcessData-392"><span class="linenos">392</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-393"><a href="#ExperimentProcessData-393"><span class="linenos">393</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating pairs: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-394"><a href="#ExperimentProcessData-394"><span class="linenos">394</span></a>            <span class="k">raise</span>
</span><span id="ExperimentProcessData-395"><a href="#ExperimentProcessData-395"><span class="linenos">395</span></a>
</span><span id="ExperimentProcessData-396"><a href="#ExperimentProcessData-396"><span class="linenos">396</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_frame</span><span class="p">(</span>
</span><span id="ExperimentProcessData-397"><a href="#ExperimentProcessData-397"><span class="linenos">397</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExperimentProcessData-398"><a href="#ExperimentProcessData-398"><span class="linenos">398</span></a>        <span class="n">stimuli_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="ExperimentProcessData-399"><a href="#ExperimentProcessData-399"><span class="linenos">399</span></a>        <span class="n">stimuli_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="ExperimentProcessData-400"><a href="#ExperimentProcessData-400"><span class="linenos">400</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-401"><a href="#ExperimentProcessData-401"><span class="linenos">401</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-402"><a href="#ExperimentProcessData-402"><span class="linenos">402</span></a><span class="sd">        Constructs the main `program_schedule_df` pandas DataFrame.</span>
</span><span id="ExperimentProcessData-403"><a href="#ExperimentProcessData-403"><span class="linenos">403</span></a>
</span><span id="ExperimentProcessData-404"><a href="#ExperimentProcessData-404"><span class="linenos">404</span></a><span class="sd">        Uses the generated stimuli sequences (`stimuli_1`, `stimuli_2`) and the</span>
</span><span id="ExperimentProcessData-405"><a href="#ExperimentProcessData-405"><span class="linenos">405</span></a><span class="sd">        calculated interval arrays (`ITI_intervals_final`, etc.) to build the</span>
</span><span id="ExperimentProcessData-406"><a href="#ExperimentProcessData-406"><span class="linenos">406</span></a><span class="sd">        DataFrame. Includes columns for trial block number, trial number, stimuli</span>
</span><span id="ExperimentProcessData-407"><a href="#ExperimentProcessData-407"><span class="linenos">407</span></a><span class="sd">        per port, calculated intervals, and placeholders (NaN) for results columns</span>
</span><span id="ExperimentProcessData-408"><a href="#ExperimentProcessData-408"><span class="linenos">408</span></a><span class="sd">        like lick counts and actual TTC duration.</span>
</span><span id="ExperimentProcessData-409"><a href="#ExperimentProcessData-409"><span class="linenos">409</span></a>
</span><span id="ExperimentProcessData-410"><a href="#ExperimentProcessData-410"><span class="linenos">410</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-411"><a href="#ExperimentProcessData-411"><span class="linenos">411</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-412"><a href="#ExperimentProcessData-412"><span class="linenos">412</span></a><span class="sd">        - **stimuli_1** (*list*): List of stimuli names for Port 1, one per trial.</span>
</span><span id="ExperimentProcessData-413"><a href="#ExperimentProcessData-413"><span class="linenos">413</span></a><span class="sd">        - **stimuli_2** (*list*): List of stimuli names for Port 2, one per trial.</span>
</span><span id="ExperimentProcessData-414"><a href="#ExperimentProcessData-414"><span class="linenos">414</span></a>
</span><span id="ExperimentProcessData-415"><a href="#ExperimentProcessData-415"><span class="linenos">415</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-416"><a href="#ExperimentProcessData-416"><span class="linenos">416</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-417"><a href="#ExperimentProcessData-417"><span class="linenos">417</span></a><span class="sd">        - Propagates pandas errors during DataFrame creation.</span>
</span><span id="ExperimentProcessData-418"><a href="#ExperimentProcessData-418"><span class="linenos">418</span></a><span class="sd">        - *ValueError*: If the lengths of input lists/arrays do not match the expected number of trials.</span>
</span><span id="ExperimentProcessData-419"><a href="#ExperimentProcessData-419"><span class="linenos">419</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-420"><a href="#ExperimentProcessData-420"><span class="linenos">420</span></a>        <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-421"><a href="#ExperimentProcessData-421"><span class="linenos">421</span></a>        <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-422"><a href="#ExperimentProcessData-422"><span class="linenos">422</span></a>        <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData-423"><a href="#ExperimentProcessData-423"><span class="linenos">423</span></a>
</span><span id="ExperimentProcessData-424"><a href="#ExperimentProcessData-424"><span class="linenos">424</span></a>        <span class="c1"># each block must contain each PAIR -&gt; num pairs = num_stim / 2</span>
</span><span id="ExperimentProcessData-425"><a href="#ExperimentProcessData-425"><span class="linenos">425</span></a>        <span class="n">block_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stimuli</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="ExperimentProcessData-426"><a href="#ExperimentProcessData-426"><span class="linenos">426</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-427"><a href="#ExperimentProcessData-427"><span class="linenos">427</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData-428"><a href="#ExperimentProcessData-428"><span class="linenos">428</span></a>                <span class="s2">&quot;Trial Block&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
</span><span id="ExperimentProcessData-429"><a href="#ExperimentProcessData-429"><span class="linenos">429</span></a>                    <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trial_blocks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="ExperimentProcessData-430"><a href="#ExperimentProcessData-430"><span class="linenos">430</span></a>                    <span class="n">block_size</span><span class="p">,</span>
</span><span id="ExperimentProcessData-431"><a href="#ExperimentProcessData-431"><span class="linenos">431</span></a>                <span class="p">),</span>
</span><span id="ExperimentProcessData-432"><a href="#ExperimentProcessData-432"><span class="linenos">432</span></a>                <span class="s2">&quot;Trial Number&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trials</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="ExperimentProcessData-433"><a href="#ExperimentProcessData-433"><span class="linenos">433</span></a>                <span class="s2">&quot;Port 1&quot;</span><span class="p">:</span> <span class="n">stimuli_1</span><span class="p">,</span>
</span><span id="ExperimentProcessData-434"><a href="#ExperimentProcessData-434"><span class="linenos">434</span></a>                <span class="s2">&quot;Port 2&quot;</span><span class="p">:</span> <span class="n">stimuli_2</span><span class="p">,</span>
</span><span id="ExperimentProcessData-435"><a href="#ExperimentProcessData-435"><span class="linenos">435</span></a>                <span class="s2">&quot;Port 1 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData-436"><a href="#ExperimentProcessData-436"><span class="linenos">436</span></a>                <span class="s2">&quot;Port 2 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData-437"><a href="#ExperimentProcessData-437"><span class="linenos">437</span></a>                <span class="s2">&quot;ITI&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData-438"><a href="#ExperimentProcessData-438"><span class="linenos">438</span></a>                <span class="s2">&quot;TTC&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData-439"><a href="#ExperimentProcessData-439"><span class="linenos">439</span></a>                <span class="s2">&quot;SAMPLE&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData-440"><a href="#ExperimentProcessData-440"><span class="linenos">440</span></a>                <span class="s2">&quot;TTC Actual&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData-441"><a href="#ExperimentProcessData-441"><span class="linenos">441</span></a>            <span class="p">}</span>
</span><span id="ExperimentProcessData-442"><a href="#ExperimentProcessData-442"><span class="linenos">442</span></a>
</span><span id="ExperimentProcessData-443"><a href="#ExperimentProcessData-443"><span class="linenos">443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="ExperimentProcessData-444"><a href="#ExperimentProcessData-444"><span class="linenos">444</span></a>
</span><span id="ExperimentProcessData-445"><a href="#ExperimentProcessData-445"><span class="linenos">445</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initialized stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-446"><a href="#ExperimentProcessData-446"><span class="linenos">446</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-447"><a href="#ExperimentProcessData-447"><span class="linenos">447</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Building Stimuli Frame: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-448"><a href="#ExperimentProcessData-448"><span class="linenos">448</span></a>            <span class="k">raise</span>
</span><span id="ExperimentProcessData-449"><a href="#ExperimentProcessData-449"><span class="linenos">449</span></a>
</span><span id="ExperimentProcessData-450"><a href="#ExperimentProcessData-450"><span class="linenos">450</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExperimentProcessData-451"><a href="#ExperimentProcessData-451"><span class="linenos">451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-452"><a href="#ExperimentProcessData-452"><span class="linenos">452</span></a><span class="sd">        Saves the experiment schedule and detailed event log DataFrames to Excel files.</span>
</span><span id="ExperimentProcessData-453"><a href="#ExperimentProcessData-453"><span class="linenos">453</span></a>
</span><span id="ExperimentProcessData-454"><a href="#ExperimentProcessData-454"><span class="linenos">454</span></a><span class="sd">        Iterates through a dictionary mapping descriptive names to the DataFrame</span>
</span><span id="ExperimentProcessData-455"><a href="#ExperimentProcessData-455"><span class="linenos">455</span></a><span class="sd">        references (`program_schedule_df`, `event_data.event_dataframe`) and calls</span>
</span><span id="ExperimentProcessData-456"><a href="#ExperimentProcessData-456"><span class="linenos">456</span></a><span class="sd">        the static `save_df_to_xlsx` method for each.</span>
</span><span id="ExperimentProcessData-457"><a href="#ExperimentProcessData-457"><span class="linenos">457</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-458"><a href="#ExperimentProcessData-458"><span class="linenos">458</span></a>        <span class="n">dataframes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData-459"><a href="#ExperimentProcessData-459"><span class="linenos">459</span></a>            <span class="s2">&quot;Experiment Schedule&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span><span class="p">,</span>
</span><span id="ExperimentProcessData-460"><a href="#ExperimentProcessData-460"><span class="linenos">460</span></a>            <span class="s2">&quot;Detailed Event Log Data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span><span class="o">.</span><span class="n">event_dataframe</span><span class="p">,</span>
</span><span id="ExperimentProcessData-461"><a href="#ExperimentProcessData-461"><span class="linenos">461</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData-462"><a href="#ExperimentProcessData-462"><span class="linenos">462</span></a>
</span><span id="ExperimentProcessData-463"><a href="#ExperimentProcessData-463"><span class="linenos">463</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span> <span class="ow">in</span> <span class="n">dataframes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="ExperimentProcessData-464"><a href="#ExperimentProcessData-464"><span class="linenos">464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span><span class="p">)</span>
</span><span id="ExperimentProcessData-465"><a href="#ExperimentProcessData-465"><span class="linenos">465</span></a>
</span><span id="ExperimentProcessData-466"><a href="#ExperimentProcessData-466"><span class="linenos">466</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData-467"><a href="#ExperimentProcessData-467"><span class="linenos">467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-468"><a href="#ExperimentProcessData-468"><span class="linenos">468</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-469"><a href="#ExperimentProcessData-469"><span class="linenos">469</span></a><span class="sd">        Calculates the 0-indexed valve number for the stimulus for side two based on give index (i) for side one.</span>
</span><span id="ExperimentProcessData-470"><a href="#ExperimentProcessData-470"><span class="linenos">470</span></a>
</span><span id="ExperimentProcessData-471"><a href="#ExperimentProcessData-471"><span class="linenos">471</span></a><span class="sd">        Based on the total number of stimuli (`num_stimuli`), determines the index</span>
</span><span id="ExperimentProcessData-472"><a href="#ExperimentProcessData-472"><span class="linenos">472</span></a><span class="sd">        of the valve paired with the valve at index `i`. Handles cases for 2, 4, or 8 total stimuli.</span>
</span><span id="ExperimentProcessData-473"><a href="#ExperimentProcessData-473"><span class="linenos">473</span></a>
</span><span id="ExperimentProcessData-474"><a href="#ExperimentProcessData-474"><span class="linenos">474</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-475"><a href="#ExperimentProcessData-475"><span class="linenos">475</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-476"><a href="#ExperimentProcessData-476"><span class="linenos">476</span></a><span class="sd">        - **i** (*int*): The 0-indexed number of the valve on one side.</span>
</span><span id="ExperimentProcessData-477"><a href="#ExperimentProcessData-477"><span class="linenos">477</span></a><span class="sd">        - **num_stimuli** (*int*): The total number of stimuli/valves being used (must be 2, 4, or 8).</span>
</span><span id="ExperimentProcessData-478"><a href="#ExperimentProcessData-478"><span class="linenos">478</span></a>
</span><span id="ExperimentProcessData-479"><a href="#ExperimentProcessData-479"><span class="linenos">479</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-480"><a href="#ExperimentProcessData-480"><span class="linenos">480</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-481"><a href="#ExperimentProcessData-481"><span class="linenos">481</span></a><span class="sd">        - *int | None*: The 0-indexed number of the paired valve, or None if `num_stimuli` is not 2, 4, or 8.</span>
</span><span id="ExperimentProcessData-482"><a href="#ExperimentProcessData-482"><span class="linenos">482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-483"><a href="#ExperimentProcessData-483"><span class="linenos">483</span></a>        <span class="k">match</span> <span class="n">num_stimuli</span><span class="p">:</span>
</span><span id="ExperimentProcessData-484"><a href="#ExperimentProcessData-484"><span class="linenos">484</span></a>            <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ExperimentProcessData-485"><a href="#ExperimentProcessData-485"><span class="linenos">485</span></a>                <span class="c1"># if num stim is 2, we are only running the same stimulus on both sides,</span>
</span><span id="ExperimentProcessData-486"><a href="#ExperimentProcessData-486"><span class="linenos">486</span></a>                <span class="c1"># we will only see i=0 here, and its paired with its sibling i=4</span>
</span><span id="ExperimentProcessData-487"><a href="#ExperimentProcessData-487"><span class="linenos">487</span></a>                <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">4</span>
</span><span id="ExperimentProcessData-488"><a href="#ExperimentProcessData-488"><span class="linenos">488</span></a>            <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="ExperimentProcessData-489"><a href="#ExperimentProcessData-489"><span class="linenos">489</span></a>                <span class="c1"># if num stim is 4, we are only running 2 stimuli per side,</span>
</span><span id="ExperimentProcessData-490"><a href="#ExperimentProcessData-490"><span class="linenos">490</span></a>                <span class="c1"># we will see i=0 and i =1 here, paired with siblings i=5 &amp; i=4 respectively</span>
</span><span id="ExperimentProcessData-491"><a href="#ExperimentProcessData-491"><span class="linenos">491</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="ExperimentProcessData-492"><a href="#ExperimentProcessData-492"><span class="linenos">492</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># valve 1</span>
</span><span id="ExperimentProcessData-493"><a href="#ExperimentProcessData-493"><span class="linenos">493</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>  <span class="c1"># (5) / valve 6</span>
</span><span id="ExperimentProcessData-494"><a href="#ExperimentProcessData-494"><span class="linenos">494</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># valve 2</span>
</span><span id="ExperimentProcessData-495"><a href="#ExperimentProcessData-495"><span class="linenos">495</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># (4) / valve 5</span>
</span><span id="ExperimentProcessData-496"><a href="#ExperimentProcessData-496"><span class="linenos">496</span></a>            <span class="k">case</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="ExperimentProcessData-497"><a href="#ExperimentProcessData-497"><span class="linenos">497</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="ExperimentProcessData-498"><a href="#ExperimentProcessData-498"><span class="linenos">498</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData-499"><a href="#ExperimentProcessData-499"><span class="linenos">499</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="ExperimentProcessData-500"><a href="#ExperimentProcessData-500"><span class="linenos">500</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ExperimentProcessData-501"><a href="#ExperimentProcessData-501"><span class="linenos">501</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData-502"><a href="#ExperimentProcessData-502"><span class="linenos">502</span></a>                    <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ExperimentProcessData-503"><a href="#ExperimentProcessData-503"><span class="linenos">503</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="ExperimentProcessData-504"><a href="#ExperimentProcessData-504"><span class="linenos">504</span></a>                    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="ExperimentProcessData-505"><a href="#ExperimentProcessData-505"><span class="linenos">505</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData-506"><a href="#ExperimentProcessData-506"><span class="linenos">506</span></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="ExperimentProcessData-507"><a href="#ExperimentProcessData-507"><span class="linenos">507</span></a>                <span class="k">return</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData-508"><a href="#ExperimentProcessData-508"><span class="linenos">508</span></a>
</span><span id="ExperimentProcessData-509"><a href="#ExperimentProcessData-509"><span class="linenos">509</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData-510"><a href="#ExperimentProcessData-510"><span class="linenos">510</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData-511"><a href="#ExperimentProcessData-511"><span class="linenos">511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-512"><a href="#ExperimentProcessData-512"><span class="linenos">512</span></a><span class="sd">        Saves a pandas DataFrame to an Excel (.xlsx) file using a file save dialog.</span>
</span><span id="ExperimentProcessData-513"><a href="#ExperimentProcessData-513"><span class="linenos">513</span></a>
</span><span id="ExperimentProcessData-514"><a href="#ExperimentProcessData-514"><span class="linenos">514</span></a><span class="sd">        Prompts the user with a standard &#39;Save As&#39; dialog window. Suggests a default</span>
</span><span id="ExperimentProcessData-515"><a href="#ExperimentProcessData-515"><span class="linenos">515</span></a><span class="sd">        filename including the provided `name` and the current date. Sets the default</span>
</span><span id="ExperimentProcessData-516"><a href="#ExperimentProcessData-516"><span class="linenos">516</span></a><span class="sd">        directory to &#39;../data_outputs&#39;. If the user confirms a filename, saves the</span>
</span><span id="ExperimentProcessData-517"><a href="#ExperimentProcessData-517"><span class="linenos">517</span></a><span class="sd">        DataFrame; otherwise, logs that the save was cancelled.</span>
</span><span id="ExperimentProcessData-518"><a href="#ExperimentProcessData-518"><span class="linenos">518</span></a>
</span><span id="ExperimentProcessData-519"><a href="#ExperimentProcessData-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-520"><a href="#ExperimentProcessData-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-521"><a href="#ExperimentProcessData-521"><span class="linenos">521</span></a><span class="sd">        - **name** (*str*): A descriptive name used in the default filename (e.g., &quot;Experiment Schedule&quot;).</span>
</span><span id="ExperimentProcessData-522"><a href="#ExperimentProcessData-522"><span class="linenos">522</span></a><span class="sd">        - **dataframe** (*pd.DataFrame*): The pandas DataFrame to be saved.</span>
</span><span id="ExperimentProcessData-523"><a href="#ExperimentProcessData-523"><span class="linenos">523</span></a>
</span><span id="ExperimentProcessData-524"><a href="#ExperimentProcessData-524"><span class="linenos">524</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-525"><a href="#ExperimentProcessData-525"><span class="linenos">525</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-526"><a href="#ExperimentProcessData-526"><span class="linenos">526</span></a><span class="sd">        - Propagates errors from `filedialog.asksaveasfilename` or `dataframe.to_excel`.</span>
</span><span id="ExperimentProcessData-527"><a href="#ExperimentProcessData-527"><span class="linenos">527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-528"><a href="#ExperimentProcessData-528"><span class="linenos">528</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-529"><a href="#ExperimentProcessData-529"><span class="linenos">529</span></a>            <span class="n">file_name</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
</span><span id="ExperimentProcessData-530"><a href="#ExperimentProcessData-530"><span class="linenos">530</span></a>                <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.xlsx&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-531"><a href="#ExperimentProcessData-531"><span class="linenos">531</span></a>                <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Excel Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.xlsx&quot;</span><span class="p">)],</span>
</span><span id="ExperimentProcessData-532"><a href="#ExperimentProcessData-532"><span class="linenos">532</span></a>                <span class="n">initialfile</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-533"><a href="#ExperimentProcessData-533"><span class="linenos">533</span></a>                <span class="n">initialdir</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="ExperimentProcessData-534"><a href="#ExperimentProcessData-534"><span class="linenos">534</span></a>                <span class="o">/</span> <span class="s2">&quot;data_outputs&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-535"><a href="#ExperimentProcessData-535"><span class="linenos">535</span></a>                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save Excel file&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData-536"><a href="#ExperimentProcessData-536"><span class="linenos">536</span></a>            <span class="p">)</span>
</span><span id="ExperimentProcessData-537"><a href="#ExperimentProcessData-537"><span class="linenos">537</span></a>
</span><span id="ExperimentProcessData-538"><a href="#ExperimentProcessData-538"><span class="linenos">538</span></a>            <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
</span><span id="ExperimentProcessData-539"><a href="#ExperimentProcessData-539"><span class="linenos">539</span></a>                <span class="n">dataframe</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ExperimentProcessData-540"><a href="#ExperimentProcessData-540"><span class="linenos">540</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ExperimentProcessData-541"><a href="#ExperimentProcessData-541"><span class="linenos">541</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User cancelled saving the stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-542"><a href="#ExperimentProcessData-542"><span class="linenos">542</span></a>
</span><span id="ExperimentProcessData-543"><a href="#ExperimentProcessData-543"><span class="linenos">543</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Data saved to xlsx files.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-544"><a href="#ExperimentProcessData-544"><span class="linenos">544</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-545"><a href="#ExperimentProcessData-545"><span class="linenos">545</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving data to xlsx: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-546"><a href="#ExperimentProcessData-546"><span class="linenos">546</span></a>            <span class="k">raise</span>
</span><span id="ExperimentProcessData-547"><a href="#ExperimentProcessData-547"><span class="linenos">547</span></a>
</span><span id="ExperimentProcessData-548"><a href="#ExperimentProcessData-548"><span class="linenos">548</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData-549"><a href="#ExperimentProcessData-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="ExperimentProcessData-550"><a href="#ExperimentProcessData-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-551"><a href="#ExperimentProcessData-551"><span class="linenos">551</span></a><span class="sd">        Converts a total number of seconds into whole minutes and remaining seconds.</span>
</span><span id="ExperimentProcessData-552"><a href="#ExperimentProcessData-552"><span class="linenos">552</span></a>
</span><span id="ExperimentProcessData-553"><a href="#ExperimentProcessData-553"><span class="linenos">553</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData-554"><a href="#ExperimentProcessData-554"><span class="linenos">554</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData-555"><a href="#ExperimentProcessData-555"><span class="linenos">555</span></a><span class="sd">        - **total_seconds** (*int*): The total duration in seconds.</span>
</span><span id="ExperimentProcessData-556"><a href="#ExperimentProcessData-556"><span class="linenos">556</span></a>
</span><span id="ExperimentProcessData-557"><a href="#ExperimentProcessData-557"><span class="linenos">557</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData-558"><a href="#ExperimentProcessData-558"><span class="linenos">558</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData-559"><a href="#ExperimentProcessData-559"><span class="linenos">559</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (minutes, seconds).</span>
</span><span id="ExperimentProcessData-560"><a href="#ExperimentProcessData-560"><span class="linenos">560</span></a>
</span><span id="ExperimentProcessData-561"><a href="#ExperimentProcessData-561"><span class="linenos">561</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData-562"><a href="#ExperimentProcessData-562"><span class="linenos">562</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData-563"><a href="#ExperimentProcessData-563"><span class="linenos">563</span></a><span class="sd">        - Propagates `TypeError` if `total_seconds` is not a number.</span>
</span><span id="ExperimentProcessData-564"><a href="#ExperimentProcessData-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData-565"><a href="#ExperimentProcessData-565"><span class="linenos">565</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData-566"><a href="#ExperimentProcessData-566"><span class="linenos">566</span></a>            <span class="c1"># Integer division to get whole minutes</span>
</span><span id="ExperimentProcessData-567"><a href="#ExperimentProcessData-567"><span class="linenos">567</span></a>            <span class="n">minutes</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">//</span> <span class="mi">60</span>
</span><span id="ExperimentProcessData-568"><a href="#ExperimentProcessData-568"><span class="linenos">568</span></a>            <span class="c1"># Modulo to get remaining seconds</span>
</span><span id="ExperimentProcessData-569"><a href="#ExperimentProcessData-569"><span class="linenos">569</span></a>            <span class="n">seconds</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">%</span> <span class="mi">60</span>
</span><span id="ExperimentProcessData-570"><a href="#ExperimentProcessData-570"><span class="linenos">570</span></a>            <span class="k">return</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span>
</span><span id="ExperimentProcessData-571"><a href="#ExperimentProcessData-571"><span class="linenos">571</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData-572"><a href="#ExperimentProcessData-572"><span class="linenos">572</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error converting seconds to minutes and seconds: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData-573"><a href="#ExperimentProcessData-573"><span class="linenos">573</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Central data management class for the behavioral experiment.</p>

<p>This class acts as the primary container and manager for all data related
to an ongoing experiment. It holds references to specialized data classes
(<code>EventData</code>, <code>StimuliData</code>, <code>ArduinoData</code>) and maintains experiment-wide
state variables, timing intervals, parameter entries (num_stimuli for example), and the generated
program schedule (<code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code>). It performs the generation
of the trial schedule and state intervals based on user inputs.</p>

<h2 id="attributes">Attributes</h2>

<ul>
<li><strong><code><a href="#ExperimentProcessData.start_time">start_time</a></code></strong> (<em>float</em>): Timestamp marking the absolute start of the program run.</li>
<li><strong><code><a href="#ExperimentProcessData.trial_start_time">trial_start_time</a></code></strong> (<em>float</em>): Timestamp marking the start of the current trial.</li>
<li><strong><code><a href="#ExperimentProcessData.state_start_time">state_start_time</a></code></strong> (<em>float</em>): Timestamp marking the entry into the current FSM state.</li>
<li><strong><code><a href="#ExperimentProcessData.current_trial_number">current_trial_number</a></code></strong> (<em>int</em>): The 1-indexed number of the trial currently in progress or about to start.</li>
<li><strong><code><a href="#ExperimentProcessData.event_data">event_data</a></code></strong> (<em>EventData</em>): Instance managing the DataFrame of recorded lick/motor events.</li>
<li><strong><code><a href="#ExperimentProcessData.stimuli_data">stimuli_data</a></code></strong> (<em>StimuliData</em>): Instance managing stimuli names and related information.</li>
<li><strong><code><a href="#ExperimentProcessData.arduino_data">arduino_data</a></code></strong> (<em>ArduinoData</em>): Instance managing Arduino communication data (durations, schedule indices) and processing incoming Arduino messages.</li>
<li><strong><code><a href="#ExperimentProcessData.ITI_intervals_final">ITI_intervals_final</a></code></strong> (<em>npt.NDArray[np.int64] | None</em>): Numpy array holding the calculated Inter-Trial Interval duration (ms) for each trial.
None until schedule generated.</li>
<li><strong><code><a href="#ExperimentProcessData.TTC_intervals_final">TTC_intervals_final</a></code></strong> (<em>npt.NDArray[np.int64] | None</em>): Numpy array holding the calculated Time-To-Contact duration (ms) for each trial.
None until schedule generated.</li>
<li><strong><code><a href="#ExperimentProcessData.sample_intervals_final">sample_intervals_final</a></code></strong> (<em>npt.NDArray[np.int64] | None</em>): Numpy array holding the calculated Sample period duration (ms) for each trial.
None until schedule generated.</li>
<li><strong><code><a href="#ExperimentProcessData.TTC_LICK_THRESHOLD">TTC_LICK_THRESHOLD</a></code></strong> (<em>int</em>): The number of licks required during the TTC state to trigger an early transition to the SAMPLE state.</li>
<li><strong><code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code></strong> (<em>dict[str, int]</em>): Dictionary storing base and random variation values (ms) for timing intervals (ITI, TTC, Sample), sourced from GUI entries.</li>
<li><strong><code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code></strong> (<em>dict[str, int]</em>): Dictionary storing core experiment parameters (Num Trial Blocks, Num Stimuli), sourced from GUI entries.
<code>Num Trials</code> is calculated based on these other values.</li>
<li><strong><code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code></strong> (<em>pd.DataFrame</em>): Pandas DataFrame holding the generated trial-by-trial schedule, including stimuli presentation, calculated intervals,
and placeholders for results. Initialized empty.</li>
</ul>

<h2 id="methods">Methods</h2>

<ul>
<li><code><a href="#ExperimentProcessData.update_model">update_model</a></code>(...)
Updates internal parameter dictionaries (<code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code>, <code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code>) based on changes from GUI input fields (tkinter vars).</li>
<li><code><a href="#ExperimentProcessData.get_default_value">get_default_value</a></code>(...)
Retrieves the default or current value for a given parameter name from internal dictionaries, used to populate GUI fields initially.</li>
<li><code><a href="#ExperimentProcessData.generate_schedule">generate_schedule</a></code>()
Performs the creation of the entire experimental schedule, including intervals and stimuli pairings. Returns status.</li>
<li><code><a href="#ExperimentProcessData.create_random_intervals">create_random_intervals</a></code>()
Calculates the final ITI, TTC, and Sample intervals for each trial based on base values and randomization ranges.</li>
<li><code><a href="#ExperimentProcessData.calculate_max_runtime">calculate_max_runtime</a></code>()
Estimates the maximum possible runtime based on the sum of all generated intervals.</li>
<li><code><a href="#ExperimentProcessData.create_trial_blocks">create_trial_blocks</a></code>()
Determines the unique pairs of stimuli presented within a single block based on the number of stimuli.</li>
<li><code><a href="#ExperimentProcessData.generate_pairs">generate_pairs</a></code>(...)
Generates the pseudo-randomized sequence of stimuli pairs across all trials and blocks.</li>
<li><code><a href="#ExperimentProcessData.build_frame">build_frame</a></code>(...)
Constructs the <code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code> DataFrame using the generated stimuli sequences and intervals.</li>
<li><code><a href="#ExperimentProcessData.save_all_data">save_all_data</a></code>()
Initiates the process of saving the schedule and event log DataFrames to Excel files.</li>
<li><code><a href="#ExperimentProcessData.get_paired_index">get_paired_index</a></code>(...)
Static method to determine the 0-indexed valve number on the opposite side corresponding to a given valve index on side one.</li>
<li><code><a href="#ExperimentProcessData.save_df_to_xlsx">save_df_to_xlsx</a></code>(...)
Static method to handle saving a pandas DataFrame to an .xlsx file using a file dialog.</li>
<li><code><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds">convert_seconds_to_minutes_seconds</a></code>(...)
Static method to convert a total number of seconds into minutes and remaining seconds.</li>
</ul>
</div>


                            <div id="ExperimentProcessData.__init__" class="classattr">
                                        <input id="ExperimentProcessData.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ExperimentProcessData</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="ExperimentProcessData.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.__init__-90"><a href="#ExperimentProcessData.__init__-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExperimentProcessData.__init__-91"><a href="#ExperimentProcessData.__init__-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.__init__-92"><a href="#ExperimentProcessData.__init__-92"><span class="linenos"> 92</span></a><span class="sd">        Initializes the ExperimentProcessData central data hub.</span>
</span><span id="ExperimentProcessData.__init__-93"><a href="#ExperimentProcessData.__init__-93"><span class="linenos"> 93</span></a>
</span><span id="ExperimentProcessData.__init__-94"><a href="#ExperimentProcessData.__init__-94"><span class="linenos"> 94</span></a><span class="sd">        Sets initial timestamps to 0.0, starts `current_trial_number` at 1.</span>
</span><span id="ExperimentProcessData.__init__-95"><a href="#ExperimentProcessData.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        Instantiates `EventData`, `StimuliData`, and `ArduinoData` (passing self reference).</span>
</span><span id="ExperimentProcessData.__init__-96"><a href="#ExperimentProcessData.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        Initializes interval arrays (`ITI_intervals_final`, etc.) to None.</span>
</span><span id="ExperimentProcessData.__init__-97"><a href="#ExperimentProcessData.__init__-97"><span class="linenos"> 97</span></a><span class="sd">        Sets the `TTC_LICK_THRESHOLD`.</span>
</span><span id="ExperimentProcessData.__init__-98"><a href="#ExperimentProcessData.__init__-98"><span class="linenos"> 98</span></a><span class="sd">        Defines default values for `interval_vars` and `exp_var_entries`.</span>
</span><span id="ExperimentProcessData.__init__-99"><a href="#ExperimentProcessData.__init__-99"><span class="linenos"> 99</span></a><span class="sd">        Initializes `program_schedule_df` as an empty DataFrame.</span>
</span><span id="ExperimentProcessData.__init__-100"><a href="#ExperimentProcessData.__init__-100"><span class="linenos">100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.__init__-101"><a href="#ExperimentProcessData.__init__-101"><span class="linenos">101</span></a>
</span><span id="ExperimentProcessData.__init__-102"><a href="#ExperimentProcessData.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData.__init__-103"><a href="#ExperimentProcessData.__init__-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trial_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData.__init__-104"><a href="#ExperimentProcessData.__init__-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">state_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ExperimentProcessData.__init__-105"><a href="#ExperimentProcessData.__init__-105"><span class="linenos">105</span></a>
</span><span id="ExperimentProcessData.__init__-106"><a href="#ExperimentProcessData.__init__-106"><span class="linenos">106</span></a>        <span class="c1"># this number is centralized here so that all state classes can access and update it easily without</span>
</span><span id="ExperimentProcessData.__init__-107"><a href="#ExperimentProcessData.__init__-107"><span class="linenos">107</span></a>        <span class="c1"># passing it through to each state every time a state change occurs</span>
</span><span id="ExperimentProcessData.__init__-108"><a href="#ExperimentProcessData.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_trial_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ExperimentProcessData.__init__-109"><a href="#ExperimentProcessData.__init__-109"><span class="linenos">109</span></a>
</span><span id="ExperimentProcessData.__init__-110"><a href="#ExperimentProcessData.__init__-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span> <span class="o">=</span> <span class="n">EventData</span><span class="p">()</span>
</span><span id="ExperimentProcessData.__init__-111"><a href="#ExperimentProcessData.__init__-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span> <span class="o">=</span> <span class="n">StimuliData</span><span class="p">()</span>
</span><span id="ExperimentProcessData.__init__-112"><a href="#ExperimentProcessData.__init__-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">arduino_data</span> <span class="o">=</span> <span class="n">ArduinoData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ExperimentProcessData.__init__-113"><a href="#ExperimentProcessData.__init__-113"><span class="linenos">113</span></a>
</span><span id="ExperimentProcessData.__init__-114"><a href="#ExperimentProcessData.__init__-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData.__init__-115"><a href="#ExperimentProcessData.__init__-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData.__init__-116"><a href="#ExperimentProcessData.__init__-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ExperimentProcessData.__init__-117"><a href="#ExperimentProcessData.__init__-117"><span class="linenos">117</span></a>
</span><span id="ExperimentProcessData.__init__-118"><a href="#ExperimentProcessData.__init__-118"><span class="linenos">118</span></a>        <span class="c1"># this constant should be used in arduino_data to say how many licks moves to sample</span>
</span><span id="ExperimentProcessData.__init__-119"><a href="#ExperimentProcessData.__init__-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TTC_LICK_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData.__init__-120"><a href="#ExperimentProcessData.__init__-120"><span class="linenos">120</span></a>
</span><span id="ExperimentProcessData.__init__-121"><a href="#ExperimentProcessData.__init__-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData.__init__-122"><a href="#ExperimentProcessData.__init__-122"><span class="linenos">122</span></a>            <span class="s2">&quot;ITI_var&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-123"><a href="#ExperimentProcessData.__init__-123"><span class="linenos">123</span></a>            <span class="s2">&quot;TTC_var&quot;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-124"><a href="#ExperimentProcessData.__init__-124"><span class="linenos">124</span></a>            <span class="s2">&quot;sample_var&quot;</span><span class="p">:</span> <span class="mi">15000</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-125"><a href="#ExperimentProcessData.__init__-125"><span class="linenos">125</span></a>            <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-126"><a href="#ExperimentProcessData.__init__-126"><span class="linenos">126</span></a>            <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-127"><a href="#ExperimentProcessData.__init__-127"><span class="linenos">127</span></a>            <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-128"><a href="#ExperimentProcessData.__init__-128"><span class="linenos">128</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData.__init__-129"><a href="#ExperimentProcessData.__init__-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData.__init__-130"><a href="#ExperimentProcessData.__init__-130"><span class="linenos">130</span></a>            <span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-131"><a href="#ExperimentProcessData.__init__-131"><span class="linenos">131</span></a>            <span class="s2">&quot;Num Stimuli&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-132"><a href="#ExperimentProcessData.__init__-132"><span class="linenos">132</span></a>            <span class="s2">&quot;Num Trials&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ExperimentProcessData.__init__-133"><a href="#ExperimentProcessData.__init__-133"><span class="linenos">133</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData.__init__-134"><a href="#ExperimentProcessData.__init__-134"><span class="linenos">134</span></a>
</span><span id="ExperimentProcessData.__init__-135"><a href="#ExperimentProcessData.__init__-135"><span class="linenos">135</span></a>        <span class="c1"># include an initial definition of program_schedule_df here as a blank df to avoid type errors and to</span>
</span><span id="ExperimentProcessData.__init__-136"><a href="#ExperimentProcessData.__init__-136"><span class="linenos">136</span></a>        <span class="c1"># make it clear that this is a class attriute</span>
</span><span id="ExperimentProcessData.__init__-137"><a href="#ExperimentProcessData.__init__-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initializes the ExperimentProcessData central data hub.</p>

<p>Sets initial timestamps to 0.0, starts <code><a href="#ExperimentProcessData.current_trial_number">current_trial_number</a></code> at 1.
Instantiates <code>EventData</code>, <code>StimuliData</code>, and <code>ArduinoData</code> (passing self reference).
Initializes interval arrays (<code><a href="#ExperimentProcessData.ITI_intervals_final">ITI_intervals_final</a></code>, etc.) to None.
Sets the <code><a href="#ExperimentProcessData.TTC_LICK_THRESHOLD">TTC_LICK_THRESHOLD</a></code>.
Defines default values for <code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code> and <code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code>.
Initializes <code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code> as an empty DataFrame.</p>
</div>


                            </div>
                            <div id="ExperimentProcessData.start_time" class="classattr">
                                <div class="attr variable">
            <span class="name">start_time</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.start_time"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.trial_start_time" class="classattr">
                                <div class="attr variable">
            <span class="name">trial_start_time</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.trial_start_time"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.state_start_time" class="classattr">
                                <div class="attr variable">
            <span class="name">state_start_time</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.state_start_time"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.current_trial_number" class="classattr">
                                <div class="attr variable">
            <span class="name">current_trial_number</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.current_trial_number"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.event_data" class="classattr">
                                <div class="attr variable">
            <span class="name">event_data</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.event_data"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.stimuli_data" class="classattr">
                                <div class="attr variable">
            <span class="name">stimuli_data</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.stimuli_data"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.arduino_data" class="classattr">
                                <div class="attr variable">
            <span class="name">arduino_data</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.arduino_data"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.ITI_intervals_final" class="classattr">
                                <div class="attr variable">
            <span class="name">ITI_intervals_final</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.ITI_intervals_final"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.TTC_intervals_final" class="classattr">
                                <div class="attr variable">
            <span class="name">TTC_intervals_final</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.TTC_intervals_final"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.sample_intervals_final" class="classattr">
                                <div class="attr variable">
            <span class="name">sample_intervals_final</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.sample_intervals_final"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.TTC_LICK_THRESHOLD" class="classattr">
                                <div class="attr variable">
            <span class="name">TTC_LICK_THRESHOLD</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.TTC_LICK_THRESHOLD"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.interval_vars" class="classattr">
                                <div class="attr variable">
            <span class="name">interval_vars</span><span class="annotation">: dict[str, int]</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.interval_vars"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.exp_var_entries" class="classattr">
                                <div class="attr variable">
            <span class="name">exp_var_entries</span><span class="annotation">: dict[str, int]</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.exp_var_entries"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.program_schedule_df" class="classattr">
                                <div class="attr variable">
            <span class="name">program_schedule_df</span>

        
    </div>
    <a class="headerlink" href="#ExperimentProcessData.program_schedule_df"></a>
    
    

                            </div>
                            <div id="ExperimentProcessData.update_model" class="classattr">
                                        <input id="ExperimentProcessData.update_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.update_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.update_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.update_model-139"><a href="#ExperimentProcessData.update_model-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.update_model-140"><a href="#ExperimentProcessData.update_model-140"><span class="linenos">140</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.update_model-141"><a href="#ExperimentProcessData.update_model-141"><span class="linenos">141</span></a><span class="sd">        Updates internal parameter dictionaries from GUI inputs.</span>
</span><span id="ExperimentProcessData.update_model-142"><a href="#ExperimentProcessData.update_model-142"><span class="linenos">142</span></a>
</span><span id="ExperimentProcessData.update_model-143"><a href="#ExperimentProcessData.update_model-143"><span class="linenos">143</span></a><span class="sd">        Checks if the `variable_name` corresponds to a key in `interval_vars` or</span>
</span><span id="ExperimentProcessData.update_model-144"><a href="#ExperimentProcessData.update_model-144"><span class="linenos">144</span></a><span class="sd">        `exp_var_entries` and updates the dictionary value if the provided `value`</span>
</span><span id="ExperimentProcessData.update_model-145"><a href="#ExperimentProcessData.update_model-145"><span class="linenos">145</span></a><span class="sd">        is not None.</span>
</span><span id="ExperimentProcessData.update_model-146"><a href="#ExperimentProcessData.update_model-146"><span class="linenos">146</span></a>
</span><span id="ExperimentProcessData.update_model-147"><a href="#ExperimentProcessData.update_model-147"><span class="linenos">147</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.update_model-148"><a href="#ExperimentProcessData.update_model-148"><span class="linenos">148</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.update_model-149"><a href="#ExperimentProcessData.update_model-149"><span class="linenos">149</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the variable being updated (should match a dictionary key).</span>
</span><span id="ExperimentProcessData.update_model-150"><a href="#ExperimentProcessData.update_model-150"><span class="linenos">150</span></a><span class="sd">        - **value** (*int | None*): The new integer value for the variable, or None if the input was invalid/empty.</span>
</span><span id="ExperimentProcessData.update_model-151"><a href="#ExperimentProcessData.update_model-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.update_model-152"><a href="#ExperimentProcessData.update_model-152"><span class="linenos">152</span></a>
</span><span id="ExperimentProcessData.update_model-153"><a href="#ExperimentProcessData.update_model-153"><span class="linenos">153</span></a>        <span class="c1"># if the variable name for the tkinter entry item that we are updating is</span>
</span><span id="ExperimentProcessData.update_model-154"><a href="#ExperimentProcessData.update_model-154"><span class="linenos">154</span></a>        <span class="c1"># in the exp_data interval variables dictionary, update that entry</span>
</span><span id="ExperimentProcessData.update_model-155"><a href="#ExperimentProcessData.update_model-155"><span class="linenos">155</span></a>        <span class="c1"># with the value in the tkinter variable</span>
</span><span id="ExperimentProcessData.update_model-156"><a href="#ExperimentProcessData.update_model-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.update_model-157"><a href="#ExperimentProcessData.update_model-157"><span class="linenos">157</span></a>            <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData.update_model-158"><a href="#ExperimentProcessData.update_model-158"><span class="linenos">158</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="ExperimentProcessData.update_model-159"><a href="#ExperimentProcessData.update_model-159"><span class="linenos">159</span></a>            <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData.update_model-160"><a href="#ExperimentProcessData.update_model-160"><span class="linenos">160</span></a>                <span class="c1"># update other var types here</span>
</span><span id="ExperimentProcessData.update_model-161"><a href="#ExperimentProcessData.update_model-161"><span class="linenos">161</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Updates internal parameter dictionaries from GUI inputs.</p>

<p>Checks if the <code>variable_name</code> corresponds to a key in <code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code> or
<code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code> and updates the dictionary value if the provided <code>value</code>
is not None.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>variable_name</strong> (<em>str</em>): The name identifier of the variable being updated (should match a dictionary key).</li>
<li><strong>value</strong> (<em>int | None</em>): The new integer value for the variable, or None if the input was invalid/empty.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.get_default_value" class="classattr">
                                        <input id="ExperimentProcessData.get_default_value-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_default_value</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.get_default_value-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.get_default_value"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.get_default_value-163"><a href="#ExperimentProcessData.get_default_value-163"><span class="linenos">163</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_default_value-164"><a href="#ExperimentProcessData.get_default_value-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.get_default_value-165"><a href="#ExperimentProcessData.get_default_value-165"><span class="linenos">165</span></a><span class="sd">        Retrieves the current value associated with a parameter name.</span>
</span><span id="ExperimentProcessData.get_default_value-166"><a href="#ExperimentProcessData.get_default_value-166"><span class="linenos">166</span></a>
</span><span id="ExperimentProcessData.get_default_value-167"><a href="#ExperimentProcessData.get_default_value-167"><span class="linenos">167</span></a><span class="sd">        Searches `interval_vars` and `exp_var_entries` for the `variable_name`.</span>
</span><span id="ExperimentProcessData.get_default_value-168"><a href="#ExperimentProcessData.get_default_value-168"><span class="linenos">168</span></a><span class="sd">        Used primarily to populate GUI fields with their initial/default values.</span>
</span><span id="ExperimentProcessData.get_default_value-169"><a href="#ExperimentProcessData.get_default_value-169"><span class="linenos">169</span></a>
</span><span id="ExperimentProcessData.get_default_value-170"><a href="#ExperimentProcessData.get_default_value-170"><span class="linenos">170</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.get_default_value-171"><a href="#ExperimentProcessData.get_default_value-171"><span class="linenos">171</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.get_default_value-172"><a href="#ExperimentProcessData.get_default_value-172"><span class="linenos">172</span></a><span class="sd">        - **variable_name** (*str*): The name identifier of the parameter whose value is requested.</span>
</span><span id="ExperimentProcessData.get_default_value-173"><a href="#ExperimentProcessData.get_default_value-173"><span class="linenos">173</span></a>
</span><span id="ExperimentProcessData.get_default_value-174"><a href="#ExperimentProcessData.get_default_value-174"><span class="linenos">174</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.get_default_value-175"><a href="#ExperimentProcessData.get_default_value-175"><span class="linenos">175</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.get_default_value-176"><a href="#ExperimentProcessData.get_default_value-176"><span class="linenos">176</span></a><span class="sd">        - *int*: The integer value associated with `variable_name` in the dictionaries, or -1 if the name is not found.</span>
</span><span id="ExperimentProcessData.get_default_value-177"><a href="#ExperimentProcessData.get_default_value-177"><span class="linenos">177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.get_default_value-178"><a href="#ExperimentProcessData.get_default_value-178"><span class="linenos">178</span></a>        <span class="k">if</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData.get_default_value-179"><a href="#ExperimentProcessData.get_default_value-179"><span class="linenos">179</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="ExperimentProcessData.get_default_value-180"><a href="#ExperimentProcessData.get_default_value-180"><span class="linenos">180</span></a>        <span class="k">elif</span> <span class="n">variable_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="ExperimentProcessData.get_default_value-181"><a href="#ExperimentProcessData.get_default_value-181"><span class="linenos">181</span></a>            <span class="c1"># update other var types here</span>
</span><span id="ExperimentProcessData.get_default_value-182"><a href="#ExperimentProcessData.get_default_value-182"><span class="linenos">182</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span>
</span><span id="ExperimentProcessData.get_default_value-183"><a href="#ExperimentProcessData.get_default_value-183"><span class="linenos">183</span></a>
</span><span id="ExperimentProcessData.get_default_value-184"><a href="#ExperimentProcessData.get_default_value-184"><span class="linenos">184</span></a>        <span class="c1"># couldn&#39;t find the value, return -1 as error code</span>
</span><span id="ExperimentProcessData.get_default_value-185"><a href="#ExperimentProcessData.get_default_value-185"><span class="linenos">185</span></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Retrieves the current value associated with a parameter name.</p>

<p>Searches <code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code> and <code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code> for the <code>variable_name</code>.
Used primarily to populate GUI fields with their initial/default values.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>variable_name</strong> (<em>str</em>): The name identifier of the parameter whose value is requested.</li>
</ul>

<h2 id="returns">Returns</h2>

<ul>
<li><em>int</em>: The integer value associated with <code>variable_name</code> in the dictionaries, or -1 if the name is not found.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.generate_schedule" class="classattr">
                                        <input id="ExperimentProcessData.generate_schedule-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_schedule</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.generate_schedule-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.generate_schedule"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.generate_schedule-187"><a href="#ExperimentProcessData.generate_schedule-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_schedule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_schedule-188"><a href="#ExperimentProcessData.generate_schedule-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.generate_schedule-189"><a href="#ExperimentProcessData.generate_schedule-189"><span class="linenos">189</span></a><span class="sd">        Generates the complete pseudo-randomized experimental schedule.</span>
</span><span id="ExperimentProcessData.generate_schedule-190"><a href="#ExperimentProcessData.generate_schedule-190"><span class="linenos">190</span></a>
</span><span id="ExperimentProcessData.generate_schedule-191"><a href="#ExperimentProcessData.generate_schedule-191"><span class="linenos">191</span></a><span class="sd">        Calculates the total number of trials based on stimuli count and block count.</span>
</span><span id="ExperimentProcessData.generate_schedule-192"><a href="#ExperimentProcessData.generate_schedule-192"><span class="linenos">192</span></a><span class="sd">        Validates the number of stimuli. Calls helper methods:</span>
</span><span id="ExperimentProcessData.generate_schedule-193"><a href="#ExperimentProcessData.generate_schedule-193"><span class="linenos">193</span></a><span class="sd">        - `create_random_intervals`() to determine ITI, TTC, Sample times per trial.</span>
</span><span id="ExperimentProcessData.generate_schedule-194"><a href="#ExperimentProcessData.generate_schedule-194"><span class="linenos">194</span></a><span class="sd">        - `create_trial_blocks`() to define unique stimuli pairs that must occur per block.</span>
</span><span id="ExperimentProcessData.generate_schedule-195"><a href="#ExperimentProcessData.generate_schedule-195"><span class="linenos">195</span></a><span class="sd">        - `generate_pairs`() to create the trial-by-trial stimuli sequence.</span>
</span><span id="ExperimentProcessData.generate_schedule-196"><a href="#ExperimentProcessData.generate_schedule-196"><span class="linenos">196</span></a><span class="sd">        - `build_frame`() to assemble the final `program_schedule_df`.</span>
</span><span id="ExperimentProcessData.generate_schedule-197"><a href="#ExperimentProcessData.generate_schedule-197"><span class="linenos">197</span></a>
</span><span id="ExperimentProcessData.generate_schedule-198"><a href="#ExperimentProcessData.generate_schedule-198"><span class="linenos">198</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.generate_schedule-199"><a href="#ExperimentProcessData.generate_schedule-199"><span class="linenos">199</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.generate_schedule-200"><a href="#ExperimentProcessData.generate_schedule-200"><span class="linenos">200</span></a><span class="sd">        - *bool*: `True` if schedule generation was successful, `False` if an error occurred (e.g., invalid number of stimuli).</span>
</span><span id="ExperimentProcessData.generate_schedule-201"><a href="#ExperimentProcessData.generate_schedule-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.generate_schedule-202"><a href="#ExperimentProcessData.generate_schedule-202"><span class="linenos">202</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_schedule-203"><a href="#ExperimentProcessData.generate_schedule-203"><span class="linenos">203</span></a>            <span class="c1"># set number of trials based on number of stimuli, and number of trial blocks set by user</span>
</span><span id="ExperimentProcessData.generate_schedule-204"><a href="#ExperimentProcessData.generate_schedule-204"><span class="linenos">204</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.generate_schedule-205"><a href="#ExperimentProcessData.generate_schedule-205"><span class="linenos">205</span></a>
</span><span id="ExperimentProcessData.generate_schedule-206"><a href="#ExperimentProcessData.generate_schedule-206"><span class="linenos">206</span></a>            <span class="k">if</span> <span class="n">num_stimuli</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">num_stimuli</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_schedule-207"><a href="#ExperimentProcessData.generate_schedule-207"><span class="linenos">207</span></a>                <span class="n">GUIUtils</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span>
</span><span id="ExperimentProcessData.generate_schedule-208"><a href="#ExperimentProcessData.generate_schedule-208"><span class="linenos">208</span></a>                    <span class="s2">&quot;NUMBER OF STIMULI EXCEEDS CURRENT MAXIMUM&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.generate_schedule-209"><a href="#ExperimentProcessData.generate_schedule-209"><span class="linenos">209</span></a>                    <span class="s2">&quot;Program is currently configured for a minumim of 2 and maximum of 8 TOTAL vavles. You must have an even number of valves. If more are desired, program configuration must be modified.&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.generate_schedule-210"><a href="#ExperimentProcessData.generate_schedule-210"><span class="linenos">210</span></a>                <span class="p">)</span>
</span><span id="ExperimentProcessData.generate_schedule-211"><a href="#ExperimentProcessData.generate_schedule-211"><span class="linenos">211</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="ExperimentProcessData.generate_schedule-212"><a href="#ExperimentProcessData.generate_schedule-212"><span class="linenos">212</span></a>
</span><span id="ExperimentProcessData.generate_schedule-213"><a href="#ExperimentProcessData.generate_schedule-213"><span class="linenos">213</span></a>            <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.generate_schedule-214"><a href="#ExperimentProcessData.generate_schedule-214"><span class="linenos">214</span></a>
</span><span id="ExperimentProcessData.generate_schedule-215"><a href="#ExperimentProcessData.generate_schedule-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_trial_blocks</span>
</span><span id="ExperimentProcessData.generate_schedule-216"><a href="#ExperimentProcessData.generate_schedule-216"><span class="linenos">216</span></a>
</span><span id="ExperimentProcessData.generate_schedule-217"><a href="#ExperimentProcessData.generate_schedule-217"><span class="linenos">217</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_random_intervals</span><span class="p">()</span>
</span><span id="ExperimentProcessData.generate_schedule-218"><a href="#ExperimentProcessData.generate_schedule-218"><span class="linenos">218</span></a>
</span><span id="ExperimentProcessData.generate_schedule-219"><a href="#ExperimentProcessData.generate_schedule-219"><span class="linenos">219</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_trial_blocks</span><span class="p">()</span>
</span><span id="ExperimentProcessData.generate_schedule-220"><a href="#ExperimentProcessData.generate_schedule-220"><span class="linenos">220</span></a>
</span><span id="ExperimentProcessData.generate_schedule-221"><a href="#ExperimentProcessData.generate_schedule-221"><span class="linenos">221</span></a>            <span class="c1"># stimuli_1 &amp; stimuli_2 are lists that hold the stimuli to be introduced for each trial on their respective side</span>
</span><span id="ExperimentProcessData.generate_schedule-222"><a href="#ExperimentProcessData.generate_schedule-222"><span class="linenos">222</span></a>            <span class="n">stimuli_side_one</span><span class="p">,</span> <span class="n">stimuli_side_two</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_pairs</span><span class="p">(</span><span class="n">pairs</span><span class="p">)</span>
</span><span id="ExperimentProcessData.generate_schedule-223"><a href="#ExperimentProcessData.generate_schedule-223"><span class="linenos">223</span></a>
</span><span id="ExperimentProcessData.generate_schedule-224"><a href="#ExperimentProcessData.generate_schedule-224"><span class="linenos">224</span></a>            <span class="c1"># args needed -&gt; stimuli_1, stimuli_2</span>
</span><span id="ExperimentProcessData.generate_schedule-225"><a href="#ExperimentProcessData.generate_schedule-225"><span class="linenos">225</span></a>            <span class="c1"># these are lists of stimuli for each trial, for each side respectivelyc:w</span>
</span><span id="ExperimentProcessData.generate_schedule-226"><a href="#ExperimentProcessData.generate_schedule-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">build_frame</span><span class="p">(</span>
</span><span id="ExperimentProcessData.generate_schedule-227"><a href="#ExperimentProcessData.generate_schedule-227"><span class="linenos">227</span></a>                <span class="n">stimuli_side_one</span><span class="p">,</span>
</span><span id="ExperimentProcessData.generate_schedule-228"><a href="#ExperimentProcessData.generate_schedule-228"><span class="linenos">228</span></a>                <span class="n">stimuli_side_two</span><span class="p">,</span>
</span><span id="ExperimentProcessData.generate_schedule-229"><a href="#ExperimentProcessData.generate_schedule-229"><span class="linenos">229</span></a>            <span class="p">)</span>
</span><span id="ExperimentProcessData.generate_schedule-230"><a href="#ExperimentProcessData.generate_schedule-230"><span class="linenos">230</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExperimentProcessData.generate_schedule-231"><a href="#ExperimentProcessData.generate_schedule-231"><span class="linenos">231</span></a>
</span><span id="ExperimentProcessData.generate_schedule-232"><a href="#ExperimentProcessData.generate_schedule-232"><span class="linenos">232</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_schedule-233"><a href="#ExperimentProcessData.generate_schedule-233"><span class="linenos">233</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating program schedule </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.generate_schedule-234"><a href="#ExperimentProcessData.generate_schedule-234"><span class="linenos">234</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Generates the complete pseudo-randomized experimental schedule.</p>

<p>Calculates the total number of trials based on stimuli count and block count.
Validates the number of stimuli. Calls helper methods:</p>

<ul>
<li><code><a href="#ExperimentProcessData.create_random_intervals">create_random_intervals</a></code>() to determine ITI, TTC, Sample times per trial.</li>
<li><code><a href="#ExperimentProcessData.create_trial_blocks">create_trial_blocks</a></code>() to define unique stimuli pairs that must occur per block.</li>
<li><code><a href="#ExperimentProcessData.generate_pairs">generate_pairs</a></code>() to create the trial-by-trial stimuli sequence.</li>
<li><code><a href="#ExperimentProcessData.build_frame">build_frame</a></code>() to assemble the final <code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code>.</li>
</ul>

<h2 id="returns">Returns</h2>

<ul>
<li><em>bool</em>: <code>True</code> if schedule generation was successful, <code>False</code> if an error occurred (e.g., invalid number of stimuli).</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.create_random_intervals" class="classattr">
                                        <input id="ExperimentProcessData.create_random_intervals-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_random_intervals</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.create_random_intervals-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.create_random_intervals"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.create_random_intervals-236"><a href="#ExperimentProcessData.create_random_intervals-236"><span class="linenos">236</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_random_intervals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_random_intervals-237"><a href="#ExperimentProcessData.create_random_intervals-237"><span class="linenos">237</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.create_random_intervals-238"><a href="#ExperimentProcessData.create_random_intervals-238"><span class="linenos">238</span></a><span class="sd">        Calculates randomized ITI, TTC, and Sample intervals for all trials.</span>
</span><span id="ExperimentProcessData.create_random_intervals-239"><a href="#ExperimentProcessData.create_random_intervals-239"><span class="linenos">239</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-240"><a href="#ExperimentProcessData.create_random_intervals-240"><span class="linenos">240</span></a><span class="sd">        For each interval type (ITI, TTC, Sample):</span>
</span><span id="ExperimentProcessData.create_random_intervals-241"><a href="#ExperimentProcessData.create_random_intervals-241"><span class="linenos">241</span></a><span class="sd">        - Retrieves the base duration and random variation range from `interval_vars`.</span>
</span><span id="ExperimentProcessData.create_random_intervals-242"><a href="#ExperimentProcessData.create_random_intervals-242"><span class="linenos">242</span></a><span class="sd">        - Creates a base array repeating the base duration for the total number of trials.</span>
</span><span id="ExperimentProcessData.create_random_intervals-243"><a href="#ExperimentProcessData.create_random_intervals-243"><span class="linenos">243</span></a><span class="sd">        - If random variation is specified, generates an array of random integers within the +/- range.</span>
</span><span id="ExperimentProcessData.create_random_intervals-244"><a href="#ExperimentProcessData.create_random_intervals-244"><span class="linenos">244</span></a><span class="sd">        - Adds the random variation array to the base array.</span>
</span><span id="ExperimentProcessData.create_random_intervals-245"><a href="#ExperimentProcessData.create_random_intervals-245"><span class="linenos">245</span></a><span class="sd">        - Stores the resulting final interval array in the corresponding class attribute (`ITI_intervals_final`, etc.).</span>
</span><span id="ExperimentProcessData.create_random_intervals-246"><a href="#ExperimentProcessData.create_random_intervals-246"><span class="linenos">246</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-247"><a href="#ExperimentProcessData.create_random_intervals-247"><span class="linenos">247</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.create_random_intervals-248"><a href="#ExperimentProcessData.create_random_intervals-248"><span class="linenos">248</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.create_random_intervals-249"><a href="#ExperimentProcessData.create_random_intervals-249"><span class="linenos">249</span></a><span class="sd">        - Propagates NumPy errors (e.g., during random number generation or array addition).</span>
</span><span id="ExperimentProcessData.create_random_intervals-250"><a href="#ExperimentProcessData.create_random_intervals-250"><span class="linenos">250</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `interval_vars`.</span>
</span><span id="ExperimentProcessData.create_random_intervals-251"><a href="#ExperimentProcessData.create_random_intervals-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.create_random_intervals-252"><a href="#ExperimentProcessData.create_random_intervals-252"><span class="linenos">252</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_random_intervals-253"><a href="#ExperimentProcessData.create_random_intervals-253"><span class="linenos">253</span></a>            <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-254"><a href="#ExperimentProcessData.create_random_intervals-254"><span class="linenos">254</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-255"><a href="#ExperimentProcessData.create_random_intervals-255"><span class="linenos">255</span></a>            <span class="n">final_intervals</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-256"><a href="#ExperimentProcessData.create_random_intervals-256"><span class="linenos">256</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-257"><a href="#ExperimentProcessData.create_random_intervals-257"><span class="linenos">257</span></a>            <span class="n">interval_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ITI_var&quot;</span><span class="p">,</span> <span class="s2">&quot;TTC_var&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_var&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-258"><a href="#ExperimentProcessData.create_random_intervals-258"><span class="linenos">258</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-259"><a href="#ExperimentProcessData.create_random_intervals-259"><span class="linenos">259</span></a>            <span class="n">random_interval_keys</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ExperimentProcessData.create_random_intervals-260"><a href="#ExperimentProcessData.create_random_intervals-260"><span class="linenos">260</span></a>                <span class="s2">&quot;ITI_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.create_random_intervals-261"><a href="#ExperimentProcessData.create_random_intervals-261"><span class="linenos">261</span></a>                <span class="s2">&quot;TTC_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.create_random_intervals-262"><a href="#ExperimentProcessData.create_random_intervals-262"><span class="linenos">262</span></a>                <span class="s2">&quot;sample_random_entry&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.create_random_intervals-263"><a href="#ExperimentProcessData.create_random_intervals-263"><span class="linenos">263</span></a>            <span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-264"><a href="#ExperimentProcessData.create_random_intervals-264"><span class="linenos">264</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-265"><a href="#ExperimentProcessData.create_random_intervals-265"><span class="linenos">265</span></a>            <span class="c1"># for each type of interval (iti, ttc, sample), generate final interval times</span>
</span><span id="ExperimentProcessData.create_random_intervals-266"><a href="#ExperimentProcessData.create_random_intervals-266"><span class="linenos">266</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">interval_keys</span><span class="p">)):</span>
</span><span id="ExperimentProcessData.create_random_intervals-267"><a href="#ExperimentProcessData.create_random_intervals-267"><span class="linenos">267</span></a>                <span class="n">base_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="ExperimentProcessData.create_random_intervals-268"><a href="#ExperimentProcessData.create_random_intervals-268"><span class="linenos">268</span></a>                <span class="c1"># this makes an array that is n=num_trials length of base_val</span>
</span><span id="ExperimentProcessData.create_random_intervals-269"><a href="#ExperimentProcessData.create_random_intervals-269"><span class="linenos">269</span></a>                <span class="n">base_intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">base_val</span><span class="p">,</span> <span class="n">num_trials</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_random_intervals-270"><a href="#ExperimentProcessData.create_random_intervals-270"><span class="linenos">270</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-271"><a href="#ExperimentProcessData.create_random_intervals-271"><span class="linenos">271</span></a>                <span class="c1"># get plus minus value for this interval type</span>
</span><span id="ExperimentProcessData.create_random_intervals-272"><a href="#ExperimentProcessData.create_random_intervals-272"><span class="linenos">272</span></a>                <span class="n">random_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_vars</span><span class="p">[</span><span class="n">random_interval_keys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="ExperimentProcessData.create_random_intervals-273"><a href="#ExperimentProcessData.create_random_intervals-273"><span class="linenos">273</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-274"><a href="#ExperimentProcessData.create_random_intervals-274"><span class="linenos">274</span></a>                <span class="k">if</span> <span class="n">random_var</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_random_intervals-275"><a href="#ExperimentProcessData.create_random_intervals-275"><span class="linenos">275</span></a>                    <span class="c1"># if there is no value to add/subtract randomly, continue on</span>
</span><span id="ExperimentProcessData.create_random_intervals-276"><a href="#ExperimentProcessData.create_random_intervals-276"><span class="linenos">276</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_intervals</span>
</span><span id="ExperimentProcessData.create_random_intervals-277"><a href="#ExperimentProcessData.create_random_intervals-277"><span class="linenos">277</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-278"><a href="#ExperimentProcessData.create_random_intervals-278"><span class="linenos">278</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_random_intervals-279"><a href="#ExperimentProcessData.create_random_intervals-279"><span class="linenos">279</span></a>                    <span class="c1"># otherwise make num_trials amount of random integers and add them to the final_intervals</span>
</span><span id="ExperimentProcessData.create_random_intervals-280"><a href="#ExperimentProcessData.create_random_intervals-280"><span class="linenos">280</span></a>                    <span class="n">random_interval_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span>
</span><span id="ExperimentProcessData.create_random_intervals-281"><a href="#ExperimentProcessData.create_random_intervals-281"><span class="linenos">281</span></a>                        <span class="o">-</span><span class="n">random_var</span><span class="p">,</span> <span class="n">random_var</span><span class="p">,</span> <span class="n">num_trials</span>
</span><span id="ExperimentProcessData.create_random_intervals-282"><a href="#ExperimentProcessData.create_random_intervals-282"><span class="linenos">282</span></a>                    <span class="p">)</span>
</span><span id="ExperimentProcessData.create_random_intervals-283"><a href="#ExperimentProcessData.create_random_intervals-283"><span class="linenos">283</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-284"><a href="#ExperimentProcessData.create_random_intervals-284"><span class="linenos">284</span></a>                    <span class="n">final_intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">base_intervals</span><span class="p">,</span> <span class="n">random_interval_arr</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_random_intervals-285"><a href="#ExperimentProcessData.create_random_intervals-285"><span class="linenos">285</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-286"><a href="#ExperimentProcessData.create_random_intervals-286"><span class="linenos">286</span></a>            <span class="c1"># assign results for respective types to the model for storage and later use</span>
</span><span id="ExperimentProcessData.create_random_intervals-287"><a href="#ExperimentProcessData.create_random_intervals-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-288"><a href="#ExperimentProcessData.create_random_intervals-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-289"><a href="#ExperimentProcessData.create_random_intervals-289"><span class="linenos">289</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span> <span class="o">=</span> <span class="n">final_intervals</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_random_intervals-290"><a href="#ExperimentProcessData.create_random_intervals-290"><span class="linenos">290</span></a>
</span><span id="ExperimentProcessData.create_random_intervals-291"><a href="#ExperimentProcessData.create_random_intervals-291"><span class="linenos">291</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Random intervals created.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_random_intervals-292"><a href="#ExperimentProcessData.create_random_intervals-292"><span class="linenos">292</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_random_intervals-293"><a href="#ExperimentProcessData.create_random_intervals-293"><span class="linenos">293</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating random intervals: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_random_intervals-294"><a href="#ExperimentProcessData.create_random_intervals-294"><span class="linenos">294</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Calculates randomized ITI, TTC, and Sample intervals for all trials.</p>

<p>For each interval type (ITI, TTC, Sample):</p>

<ul>
<li>Retrieves the base duration and random variation range from <code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code>.</li>
<li>Creates a base array repeating the base duration for the total number of trials.</li>
<li>If random variation is specified, generates an array of random integers within the +/- range.</li>
<li>Adds the random variation array to the base array.</li>
<li>Stores the resulting final interval array in the corresponding class attribute (<code><a href="#ExperimentProcessData.ITI_intervals_final">ITI_intervals_final</a></code>, etc.).</li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates NumPy errors (e.g., during random number generation or array addition).</li>
<li><em>KeyError</em>: If expected keys are missing from <code><a href="#ExperimentProcessData.interval_vars">interval_vars</a></code>.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.calculate_max_runtime" class="classattr">
                                        <input id="ExperimentProcessData.calculate_max_runtime-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">calculate_max_runtime</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.calculate_max_runtime-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.calculate_max_runtime"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.calculate_max_runtime-296"><a href="#ExperimentProcessData.calculate_max_runtime-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_max_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-297"><a href="#ExperimentProcessData.calculate_max_runtime-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-298"><a href="#ExperimentProcessData.calculate_max_runtime-298"><span class="linenos">298</span></a><span class="sd">        Estimates the maximum possible experiment runtime in minutes and seconds.</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-299"><a href="#ExperimentProcessData.calculate_max_runtime-299"><span class="linenos">299</span></a>
</span><span id="ExperimentProcessData.calculate_max_runtime-300"><a href="#ExperimentProcessData.calculate_max_runtime-300"><span class="linenos">300</span></a><span class="sd">        Sums all generated interval durations (ITI, TTC, Sample) across all trials.</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-301"><a href="#ExperimentProcessData.calculate_max_runtime-301"><span class="linenos">301</span></a><span class="sd">        Converts the total milliseconds to seconds, then uses `convert_seconds_to_minutes_seconds`.</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-302"><a href="#ExperimentProcessData.calculate_max_runtime-302"><span class="linenos">302</span></a>
</span><span id="ExperimentProcessData.calculate_max_runtime-303"><a href="#ExperimentProcessData.calculate_max_runtime-303"><span class="linenos">303</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-304"><a href="#ExperimentProcessData.calculate_max_runtime-304"><span class="linenos">304</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-305"><a href="#ExperimentProcessData.calculate_max_runtime-305"><span class="linenos">305</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (estimated_max_minutes, estimated_max_seconds).</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-306"><a href="#ExperimentProcessData.calculate_max_runtime-306"><span class="linenos">306</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-307"><a href="#ExperimentProcessData.calculate_max_runtime-307"><span class="linenos">307</span></a>        <span class="n">max_time</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-308"><a href="#ExperimentProcessData.calculate_max_runtime-308"><span class="linenos">308</span></a>            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-309"><a href="#ExperimentProcessData.calculate_max_runtime-309"><span class="linenos">309</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-310"><a href="#ExperimentProcessData.calculate_max_runtime-310"><span class="linenos">310</span></a>            <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">)</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-311"><a href="#ExperimentProcessData.calculate_max_runtime-311"><span class="linenos">311</span></a>        <span class="p">)</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-312"><a href="#ExperimentProcessData.calculate_max_runtime-312"><span class="linenos">312</span></a>        <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">max_time</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span><span id="ExperimentProcessData.calculate_max_runtime-313"><a href="#ExperimentProcessData.calculate_max_runtime-313"><span class="linenos">313</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Estimates the maximum possible experiment runtime in minutes and seconds.</p>

<p>Sums all generated interval durations (ITI, TTC, Sample) across all trials.
Converts the total milliseconds to seconds, then uses <code><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds">convert_seconds_to_minutes_seconds</a></code>.</p>

<h2 id="returns">Returns</h2>

<ul>
<li><em>tuple[int, int]</em>: A tuple containing (estimated_max_minutes, estimated_max_seconds).</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.create_trial_blocks" class="classattr">
                                        <input id="ExperimentProcessData.create_trial_blocks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_trial_blocks</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.create_trial_blocks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.create_trial_blocks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.create_trial_blocks-315"><a href="#ExperimentProcessData.create_trial_blocks-315"><span class="linenos">315</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_trial_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
</span><span id="ExperimentProcessData.create_trial_blocks-316"><a href="#ExperimentProcessData.create_trial_blocks-316"><span class="linenos">316</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.create_trial_blocks-317"><a href="#ExperimentProcessData.create_trial_blocks-317"><span class="linenos">317</span></a><span class="sd">        Determines the unique stimuli pairings within a single trial block.</span>
</span><span id="ExperimentProcessData.create_trial_blocks-318"><a href="#ExperimentProcessData.create_trial_blocks-318"><span class="linenos">318</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-319"><a href="#ExperimentProcessData.create_trial_blocks-319"><span class="linenos">319</span></a><span class="sd">        Calculates the number of pairs per block (`block_sz = num_stimuli / 2`).</span>
</span><span id="ExperimentProcessData.create_trial_blocks-320"><a href="#ExperimentProcessData.create_trial_blocks-320"><span class="linenos">320</span></a><span class="sd">        Iterates from `i = 0` to `block_sz - 1`. For each `i`, finds the</span>
</span><span id="ExperimentProcessData.create_trial_blocks-321"><a href="#ExperimentProcessData.create_trial_blocks-321"><span class="linenos">321</span></a><span class="sd">        corresponding paired valve index using `get_paired_index`. Appends the</span>
</span><span id="ExperimentProcessData.create_trial_blocks-322"><a href="#ExperimentProcessData.create_trial_blocks-322"><span class="linenos">322</span></a><span class="sd">        tuple of (stimulus_name_at_i, stimulus_name_at_paired_index) to a list.</span>
</span><span id="ExperimentProcessData.create_trial_blocks-323"><a href="#ExperimentProcessData.create_trial_blocks-323"><span class="linenos">323</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-324"><a href="#ExperimentProcessData.create_trial_blocks-324"><span class="linenos">324</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.create_trial_blocks-325"><a href="#ExperimentProcessData.create_trial_blocks-325"><span class="linenos">325</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.create_trial_blocks-326"><a href="#ExperimentProcessData.create_trial_blocks-326"><span class="linenos">326</span></a><span class="sd">        - *List[tuple]*: A list of tuples, where each tuple represents a unique stimuli pairing (e.g., `[(&#39;Odor A&#39;, &#39;Odor B&#39;), (&#39;Odor C&#39;, &#39;Odor D&#39;)]`).</span>
</span><span id="ExperimentProcessData.create_trial_blocks-327"><a href="#ExperimentProcessData.create_trial_blocks-327"><span class="linenos">327</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-328"><a href="#ExperimentProcessData.create_trial_blocks-328"><span class="linenos">328</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.create_trial_blocks-329"><a href="#ExperimentProcessData.create_trial_blocks-329"><span class="linenos">329</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.create_trial_blocks-330"><a href="#ExperimentProcessData.create_trial_blocks-330"><span class="linenos">330</span></a><span class="sd">        - Propagates errors from `get_paired_index`.</span>
</span><span id="ExperimentProcessData.create_trial_blocks-331"><a href="#ExperimentProcessData.create_trial_blocks-331"><span class="linenos">331</span></a><span class="sd">        - *KeyError*: If expected keys are missing from `exp_var_entries`.</span>
</span><span id="ExperimentProcessData.create_trial_blocks-332"><a href="#ExperimentProcessData.create_trial_blocks-332"><span class="linenos">332</span></a><span class="sd">        - *IndexError*: If calculated indices are out of bounds for `stimuli_data.stimuli_vars`.</span>
</span><span id="ExperimentProcessData.create_trial_blocks-333"><a href="#ExperimentProcessData.create_trial_blocks-333"><span class="linenos">333</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.create_trial_blocks-334"><a href="#ExperimentProcessData.create_trial_blocks-334"><span class="linenos">334</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_trial_blocks-335"><a href="#ExperimentProcessData.create_trial_blocks-335"><span class="linenos">335</span></a>            <span class="c1"># creating pairs list which stores all possible pairs</span>
</span><span id="ExperimentProcessData.create_trial_blocks-336"><a href="#ExperimentProcessData.create_trial_blocks-336"><span class="linenos">336</span></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData.create_trial_blocks-337"><a href="#ExperimentProcessData.create_trial_blocks-337"><span class="linenos">337</span></a>            <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.create_trial_blocks-338"><a href="#ExperimentProcessData.create_trial_blocks-338"><span class="linenos">338</span></a>            <span class="n">block_sz</span> <span class="o">=</span> <span class="n">num_stimuli</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="ExperimentProcessData.create_trial_blocks-339"><a href="#ExperimentProcessData.create_trial_blocks-339"><span class="linenos">339</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-340"><a href="#ExperimentProcessData.create_trial_blocks-340"><span class="linenos">340</span></a>            <span class="n">stimuli_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stimuli_data</span><span class="o">.</span><span class="n">stimuli_vars</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="ExperimentProcessData.create_trial_blocks-341"><a href="#ExperimentProcessData.create_trial_blocks-341"><span class="linenos">341</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-342"><a href="#ExperimentProcessData.create_trial_blocks-342"><span class="linenos">342</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">block_sz</span><span class="p">):</span>
</span><span id="ExperimentProcessData.create_trial_blocks-343"><a href="#ExperimentProcessData.create_trial_blocks-343"><span class="linenos">343</span></a>                <span class="n">pair_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_trial_blocks-344"><a href="#ExperimentProcessData.create_trial_blocks-344"><span class="linenos">344</span></a>                <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">stimuli_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">stimuli_names</span><span class="p">[</span><span class="n">pair_index</span><span class="p">]))</span>
</span><span id="ExperimentProcessData.create_trial_blocks-345"><a href="#ExperimentProcessData.create_trial_blocks-345"><span class="linenos">345</span></a>
</span><span id="ExperimentProcessData.create_trial_blocks-346"><a href="#ExperimentProcessData.create_trial_blocks-346"><span class="linenos">346</span></a>            <span class="k">return</span> <span class="n">pairs</span>
</span><span id="ExperimentProcessData.create_trial_blocks-347"><a href="#ExperimentProcessData.create_trial_blocks-347"><span class="linenos">347</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.create_trial_blocks-348"><a href="#ExperimentProcessData.create_trial_blocks-348"><span class="linenos">348</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating trial blocks: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.create_trial_blocks-349"><a href="#ExperimentProcessData.create_trial_blocks-349"><span class="linenos">349</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Determines the unique stimuli pairings within a single trial block.</p>

<p>Calculates the number of pairs per block (<code>block_sz = num_stimuli / 2</code>).
Iterates from <code>i = 0</code> to <code>block_sz - 1</code>. For each <code>i</code>, finds the
corresponding paired valve index using <code><a href="#ExperimentProcessData.get_paired_index">get_paired_index</a></code>. Appends the
tuple of (stimulus_name_at_i, stimulus_name_at_paired_index) to a list.</p>

<h2 id="returns">Returns</h2>

<ul>
<li><em>List[tuple]</em>: A list of tuples, where each tuple represents a unique stimuli pairing (e.g., <code>[('Odor A', 'Odor B'), ('Odor C', 'Odor D')]</code>).</li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates errors from <code><a href="#ExperimentProcessData.get_paired_index">get_paired_index</a></code>.</li>
<li><em>KeyError</em>: If expected keys are missing from <code><a href="#ExperimentProcessData.exp_var_entries">exp_var_entries</a></code>.</li>
<li><em>IndexError</em>: If calculated indices are out of bounds for <code>stimuli_data.stimuli_vars</code>.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.generate_pairs" class="classattr">
                                        <input id="ExperimentProcessData.generate_pairs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_pairs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.generate_pairs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.generate_pairs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.generate_pairs-351"><a href="#ExperimentProcessData.generate_pairs-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="ExperimentProcessData.generate_pairs-352"><a href="#ExperimentProcessData.generate_pairs-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.generate_pairs-353"><a href="#ExperimentProcessData.generate_pairs-353"><span class="linenos">353</span></a><span class="sd">        Generates the full, pseudo-randomized sequence of stimuli pairs for all trials.</span>
</span><span id="ExperimentProcessData.generate_pairs-354"><a href="#ExperimentProcessData.generate_pairs-354"><span class="linenos">354</span></a>
</span><span id="ExperimentProcessData.generate_pairs-355"><a href="#ExperimentProcessData.generate_pairs-355"><span class="linenos">355</span></a><span class="sd">        Repeats the following for the number of trial blocks specified:</span>
</span><span id="ExperimentProcessData.generate_pairs-356"><a href="#ExperimentProcessData.generate_pairs-356"><span class="linenos">356</span></a><span class="sd">        - Takes the list of unique `pairs` generated by `create_trial_blocks` that must be included in each block.</span>
</span><span id="ExperimentProcessData.generate_pairs-357"><a href="#ExperimentProcessData.generate_pairs-357"><span class="linenos">357</span></a><span class="sd">        - Shuffles this list randomly (`np.random.shuffle`).</span>
</span><span id="ExperimentProcessData.generate_pairs-358"><a href="#ExperimentProcessData.generate_pairs-358"><span class="linenos">358</span></a><span class="sd">        - Extends a master list `pseudo_random_lineup` (adds new list to that list) with the shuffled block.</span>
</span><span id="ExperimentProcessData.generate_pairs-359"><a href="#ExperimentProcessData.generate_pairs-359"><span class="linenos">359</span></a><span class="sd">        After creating the full sequence, separates it into two lists: one for the</span>
</span><span id="ExperimentProcessData.generate_pairs-360"><a href="#ExperimentProcessData.generate_pairs-360"><span class="linenos">360</span></a><span class="sd">        stimulus presented on side one each trial, and one for side two.</span>
</span><span id="ExperimentProcessData.generate_pairs-361"><a href="#ExperimentProcessData.generate_pairs-361"><span class="linenos">361</span></a>
</span><span id="ExperimentProcessData.generate_pairs-362"><a href="#ExperimentProcessData.generate_pairs-362"><span class="linenos">362</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.generate_pairs-363"><a href="#ExperimentProcessData.generate_pairs-363"><span class="linenos">363</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.generate_pairs-364"><a href="#ExperimentProcessData.generate_pairs-364"><span class="linenos">364</span></a><span class="sd">        - **pairs** (*List[tuple[str, str]]*): The list of unique stimuli pairings defining one block, generated by `create_trial_blocks`.</span>
</span><span id="ExperimentProcessData.generate_pairs-365"><a href="#ExperimentProcessData.generate_pairs-365"><span class="linenos">365</span></a>
</span><span id="ExperimentProcessData.generate_pairs-366"><a href="#ExperimentProcessData.generate_pairs-366"><span class="linenos">366</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.generate_pairs-367"><a href="#ExperimentProcessData.generate_pairs-367"><span class="linenos">367</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.generate_pairs-368"><a href="#ExperimentProcessData.generate_pairs-368"><span class="linenos">368</span></a><span class="sd">        - *Tuple[list, list]*: A tuple containing two lists:</span>
</span><span id="ExperimentProcessData.generate_pairs-369"><a href="#ExperimentProcessData.generate_pairs-369"><span class="linenos">369</span></a><span class="sd">            - `stimulus_1`: List of stimuli names for Port 1 for each trial.</span>
</span><span id="ExperimentProcessData.generate_pairs-370"><a href="#ExperimentProcessData.generate_pairs-370"><span class="linenos">370</span></a><span class="sd">            - `stimulus_2`: List of stimuli names for Port 2 for each trial.</span>
</span><span id="ExperimentProcessData.generate_pairs-371"><a href="#ExperimentProcessData.generate_pairs-371"><span class="linenos">371</span></a>
</span><span id="ExperimentProcessData.generate_pairs-372"><a href="#ExperimentProcessData.generate_pairs-372"><span class="linenos">372</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.generate_pairs-373"><a href="#ExperimentProcessData.generate_pairs-373"><span class="linenos">373</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.generate_pairs-374"><a href="#ExperimentProcessData.generate_pairs-374"><span class="linenos">374</span></a><span class="sd">        - Propagates errors from `np.random.shuffle`.</span>
</span><span id="ExperimentProcessData.generate_pairs-375"><a href="#ExperimentProcessData.generate_pairs-375"><span class="linenos">375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.generate_pairs-376"><a href="#ExperimentProcessData.generate_pairs-376"><span class="linenos">376</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_pairs-377"><a href="#ExperimentProcessData.generate_pairs-377"><span class="linenos">377</span></a>            <span class="n">pseudo_random_lineup</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData.generate_pairs-378"><a href="#ExperimentProcessData.generate_pairs-378"><span class="linenos">378</span></a>
</span><span id="ExperimentProcessData.generate_pairs-379"><a href="#ExperimentProcessData.generate_pairs-379"><span class="linenos">379</span></a>            <span class="n">stimulus_1</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData.generate_pairs-380"><a href="#ExperimentProcessData.generate_pairs-380"><span class="linenos">380</span></a>            <span class="n">stimulus_2</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ExperimentProcessData.generate_pairs-381"><a href="#ExperimentProcessData.generate_pairs-381"><span class="linenos">381</span></a>
</span><span id="ExperimentProcessData.generate_pairs-382"><a href="#ExperimentProcessData.generate_pairs-382"><span class="linenos">382</span></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]):</span>
</span><span id="ExperimentProcessData.generate_pairs-383"><a href="#ExperimentProcessData.generate_pairs-383"><span class="linenos">383</span></a>                <span class="n">pairs_copy</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">]</span>
</span><span id="ExperimentProcessData.generate_pairs-384"><a href="#ExperimentProcessData.generate_pairs-384"><span class="linenos">384</span></a>                <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="ExperimentProcessData.generate_pairs-385"><a href="#ExperimentProcessData.generate_pairs-385"><span class="linenos">385</span></a>                <span class="n">pseudo_random_lineup</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pairs_copy</span><span class="p">)</span>
</span><span id="ExperimentProcessData.generate_pairs-386"><a href="#ExperimentProcessData.generate_pairs-386"><span class="linenos">386</span></a>
</span><span id="ExperimentProcessData.generate_pairs-387"><a href="#ExperimentProcessData.generate_pairs-387"><span class="linenos">387</span></a>            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pseudo_random_lineup</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_pairs-388"><a href="#ExperimentProcessData.generate_pairs-388"><span class="linenos">388</span></a>                <span class="n">stimulus_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="ExperimentProcessData.generate_pairs-389"><a href="#ExperimentProcessData.generate_pairs-389"><span class="linenos">389</span></a>                <span class="n">stimulus_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ExperimentProcessData.generate_pairs-390"><a href="#ExperimentProcessData.generate_pairs-390"><span class="linenos">390</span></a>
</span><span id="ExperimentProcessData.generate_pairs-391"><a href="#ExperimentProcessData.generate_pairs-391"><span class="linenos">391</span></a>            <span class="k">return</span> <span class="n">stimulus_1</span><span class="p">,</span> <span class="n">stimulus_2</span>
</span><span id="ExperimentProcessData.generate_pairs-392"><a href="#ExperimentProcessData.generate_pairs-392"><span class="linenos">392</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.generate_pairs-393"><a href="#ExperimentProcessData.generate_pairs-393"><span class="linenos">393</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating pairs: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.generate_pairs-394"><a href="#ExperimentProcessData.generate_pairs-394"><span class="linenos">394</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Generates the full, pseudo-randomized sequence of stimuli pairs for all trials.</p>

<p>Repeats the following for the number of trial blocks specified:</p>

<ul>
<li>Takes the list of unique <code>pairs</code> generated by <code><a href="#ExperimentProcessData.create_trial_blocks">create_trial_blocks</a></code> that must be included in each block.</li>
<li>Shuffles this list randomly (<code>np.random.shuffle</code>).</li>
<li>Extends a master list <code>pseudo_random_lineup</code> (adds new list to that list) with the shuffled block.
After creating the full sequence, separates it into two lists: one for the
stimulus presented on side one each trial, and one for side two.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>pairs</strong> (<em>List[tuple[str, str]]</em>): The list of unique stimuli pairings defining one block, generated by <code><a href="#ExperimentProcessData.create_trial_blocks">create_trial_blocks</a></code>.</li>
</ul>

<h2 id="returns">Returns</h2>

<ul>
<li><em>Tuple[list, list]</em>: A tuple containing two lists:
<ul>
<li><code>stimulus_1</code>: List of stimuli names for Port 1 for each trial.</li>
<li><code>stimulus_2</code>: List of stimuli names for Port 2 for each trial.</li>
</ul></li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates errors from <code>np.random.shuffle</code>.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.build_frame" class="classattr">
                                        <input id="ExperimentProcessData.build_frame-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">build_frame</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">stimuli_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="n">stimuli_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.build_frame-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.build_frame"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.build_frame-396"><a href="#ExperimentProcessData.build_frame-396"><span class="linenos">396</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_frame</span><span class="p">(</span>
</span><span id="ExperimentProcessData.build_frame-397"><a href="#ExperimentProcessData.build_frame-397"><span class="linenos">397</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-398"><a href="#ExperimentProcessData.build_frame-398"><span class="linenos">398</span></a>        <span class="n">stimuli_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="ExperimentProcessData.build_frame-399"><a href="#ExperimentProcessData.build_frame-399"><span class="linenos">399</span></a>        <span class="n">stimuli_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="ExperimentProcessData.build_frame-400"><a href="#ExperimentProcessData.build_frame-400"><span class="linenos">400</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.build_frame-401"><a href="#ExperimentProcessData.build_frame-401"><span class="linenos">401</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.build_frame-402"><a href="#ExperimentProcessData.build_frame-402"><span class="linenos">402</span></a><span class="sd">        Constructs the main `program_schedule_df` pandas DataFrame.</span>
</span><span id="ExperimentProcessData.build_frame-403"><a href="#ExperimentProcessData.build_frame-403"><span class="linenos">403</span></a>
</span><span id="ExperimentProcessData.build_frame-404"><a href="#ExperimentProcessData.build_frame-404"><span class="linenos">404</span></a><span class="sd">        Uses the generated stimuli sequences (`stimuli_1`, `stimuli_2`) and the</span>
</span><span id="ExperimentProcessData.build_frame-405"><a href="#ExperimentProcessData.build_frame-405"><span class="linenos">405</span></a><span class="sd">        calculated interval arrays (`ITI_intervals_final`, etc.) to build the</span>
</span><span id="ExperimentProcessData.build_frame-406"><a href="#ExperimentProcessData.build_frame-406"><span class="linenos">406</span></a><span class="sd">        DataFrame. Includes columns for trial block number, trial number, stimuli</span>
</span><span id="ExperimentProcessData.build_frame-407"><a href="#ExperimentProcessData.build_frame-407"><span class="linenos">407</span></a><span class="sd">        per port, calculated intervals, and placeholders (NaN) for results columns</span>
</span><span id="ExperimentProcessData.build_frame-408"><a href="#ExperimentProcessData.build_frame-408"><span class="linenos">408</span></a><span class="sd">        like lick counts and actual TTC duration.</span>
</span><span id="ExperimentProcessData.build_frame-409"><a href="#ExperimentProcessData.build_frame-409"><span class="linenos">409</span></a>
</span><span id="ExperimentProcessData.build_frame-410"><a href="#ExperimentProcessData.build_frame-410"><span class="linenos">410</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.build_frame-411"><a href="#ExperimentProcessData.build_frame-411"><span class="linenos">411</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.build_frame-412"><a href="#ExperimentProcessData.build_frame-412"><span class="linenos">412</span></a><span class="sd">        - **stimuli_1** (*list*): List of stimuli names for Port 1, one per trial.</span>
</span><span id="ExperimentProcessData.build_frame-413"><a href="#ExperimentProcessData.build_frame-413"><span class="linenos">413</span></a><span class="sd">        - **stimuli_2** (*list*): List of stimuli names for Port 2, one per trial.</span>
</span><span id="ExperimentProcessData.build_frame-414"><a href="#ExperimentProcessData.build_frame-414"><span class="linenos">414</span></a>
</span><span id="ExperimentProcessData.build_frame-415"><a href="#ExperimentProcessData.build_frame-415"><span class="linenos">415</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.build_frame-416"><a href="#ExperimentProcessData.build_frame-416"><span class="linenos">416</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.build_frame-417"><a href="#ExperimentProcessData.build_frame-417"><span class="linenos">417</span></a><span class="sd">        - Propagates pandas errors during DataFrame creation.</span>
</span><span id="ExperimentProcessData.build_frame-418"><a href="#ExperimentProcessData.build_frame-418"><span class="linenos">418</span></a><span class="sd">        - *ValueError*: If the lengths of input lists/arrays do not match the expected number of trials.</span>
</span><span id="ExperimentProcessData.build_frame-419"><a href="#ExperimentProcessData.build_frame-419"><span class="linenos">419</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.build_frame-420"><a href="#ExperimentProcessData.build_frame-420"><span class="linenos">420</span></a>        <span class="n">num_stimuli</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Stimuli&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.build_frame-421"><a href="#ExperimentProcessData.build_frame-421"><span class="linenos">421</span></a>        <span class="n">num_trials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trials&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.build_frame-422"><a href="#ExperimentProcessData.build_frame-422"><span class="linenos">422</span></a>        <span class="n">num_trial_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_var_entries</span><span class="p">[</span><span class="s2">&quot;Num Trial Blocks&quot;</span><span class="p">]</span>
</span><span id="ExperimentProcessData.build_frame-423"><a href="#ExperimentProcessData.build_frame-423"><span class="linenos">423</span></a>
</span><span id="ExperimentProcessData.build_frame-424"><a href="#ExperimentProcessData.build_frame-424"><span class="linenos">424</span></a>        <span class="c1"># each block must contain each PAIR -&gt; num pairs = num_stim / 2</span>
</span><span id="ExperimentProcessData.build_frame-425"><a href="#ExperimentProcessData.build_frame-425"><span class="linenos">425</span></a>        <span class="n">block_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stimuli</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="ExperimentProcessData.build_frame-426"><a href="#ExperimentProcessData.build_frame-426"><span class="linenos">426</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.build_frame-427"><a href="#ExperimentProcessData.build_frame-427"><span class="linenos">427</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData.build_frame-428"><a href="#ExperimentProcessData.build_frame-428"><span class="linenos">428</span></a>                <span class="s2">&quot;Trial Block&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
</span><span id="ExperimentProcessData.build_frame-429"><a href="#ExperimentProcessData.build_frame-429"><span class="linenos">429</span></a>                    <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trial_blocks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-430"><a href="#ExperimentProcessData.build_frame-430"><span class="linenos">430</span></a>                    <span class="n">block_size</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-431"><a href="#ExperimentProcessData.build_frame-431"><span class="linenos">431</span></a>                <span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-432"><a href="#ExperimentProcessData.build_frame-432"><span class="linenos">432</span></a>                <span class="s2">&quot;Trial Number&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_trials</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-433"><a href="#ExperimentProcessData.build_frame-433"><span class="linenos">433</span></a>                <span class="s2">&quot;Port 1&quot;</span><span class="p">:</span> <span class="n">stimuli_1</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-434"><a href="#ExperimentProcessData.build_frame-434"><span class="linenos">434</span></a>                <span class="s2">&quot;Port 2&quot;</span><span class="p">:</span> <span class="n">stimuli_2</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-435"><a href="#ExperimentProcessData.build_frame-435"><span class="linenos">435</span></a>                <span class="s2">&quot;Port 1 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-436"><a href="#ExperimentProcessData.build_frame-436"><span class="linenos">436</span></a>                <span class="s2">&quot;Port 2 Licks&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-437"><a href="#ExperimentProcessData.build_frame-437"><span class="linenos">437</span></a>                <span class="s2">&quot;ITI&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ITI_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-438"><a href="#ExperimentProcessData.build_frame-438"><span class="linenos">438</span></a>                <span class="s2">&quot;TTC&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">TTC_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-439"><a href="#ExperimentProcessData.build_frame-439"><span class="linenos">439</span></a>                <span class="s2">&quot;SAMPLE&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_intervals_final</span><span class="p">,</span>
</span><span id="ExperimentProcessData.build_frame-440"><a href="#ExperimentProcessData.build_frame-440"><span class="linenos">440</span></a>                <span class="s2">&quot;TTC Actual&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">num_trials</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
</span><span id="ExperimentProcessData.build_frame-441"><a href="#ExperimentProcessData.build_frame-441"><span class="linenos">441</span></a>            <span class="p">}</span>
</span><span id="ExperimentProcessData.build_frame-442"><a href="#ExperimentProcessData.build_frame-442"><span class="linenos">442</span></a>
</span><span id="ExperimentProcessData.build_frame-443"><a href="#ExperimentProcessData.build_frame-443"><span class="linenos">443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="ExperimentProcessData.build_frame-444"><a href="#ExperimentProcessData.build_frame-444"><span class="linenos">444</span></a>
</span><span id="ExperimentProcessData.build_frame-445"><a href="#ExperimentProcessData.build_frame-445"><span class="linenos">445</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initialized stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.build_frame-446"><a href="#ExperimentProcessData.build_frame-446"><span class="linenos">446</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.build_frame-447"><a href="#ExperimentProcessData.build_frame-447"><span class="linenos">447</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error Building Stimuli Frame: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.build_frame-448"><a href="#ExperimentProcessData.build_frame-448"><span class="linenos">448</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Constructs the main <code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code> pandas DataFrame.</p>

<p>Uses the generated stimuli sequences (<code>stimuli_1</code>, <code>stimuli_2</code>) and the
calculated interval arrays (<code><a href="#ExperimentProcessData.ITI_intervals_final">ITI_intervals_final</a></code>, etc.) to build the
DataFrame. Includes columns for trial block number, trial number, stimuli
per port, calculated intervals, and placeholders (NaN) for results columns
like lick counts and actual TTC duration.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>stimuli_1</strong> (<em>list</em>): List of stimuli names for Port 1, one per trial.</li>
<li><strong>stimuli_2</strong> (<em>list</em>): List of stimuli names for Port 2, one per trial.</li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates pandas errors during DataFrame creation.</li>
<li><em>ValueError</em>: If the lengths of input lists/arrays do not match the expected number of trials.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.save_all_data" class="classattr">
                                        <input id="ExperimentProcessData.save_all_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_all_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ExperimentProcessData.save_all_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.save_all_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.save_all_data-450"><a href="#ExperimentProcessData.save_all_data-450"><span class="linenos">450</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ExperimentProcessData.save_all_data-451"><a href="#ExperimentProcessData.save_all_data-451"><span class="linenos">451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.save_all_data-452"><a href="#ExperimentProcessData.save_all_data-452"><span class="linenos">452</span></a><span class="sd">        Saves the experiment schedule and detailed event log DataFrames to Excel files.</span>
</span><span id="ExperimentProcessData.save_all_data-453"><a href="#ExperimentProcessData.save_all_data-453"><span class="linenos">453</span></a>
</span><span id="ExperimentProcessData.save_all_data-454"><a href="#ExperimentProcessData.save_all_data-454"><span class="linenos">454</span></a><span class="sd">        Iterates through a dictionary mapping descriptive names to the DataFrame</span>
</span><span id="ExperimentProcessData.save_all_data-455"><a href="#ExperimentProcessData.save_all_data-455"><span class="linenos">455</span></a><span class="sd">        references (`program_schedule_df`, `event_data.event_dataframe`) and calls</span>
</span><span id="ExperimentProcessData.save_all_data-456"><a href="#ExperimentProcessData.save_all_data-456"><span class="linenos">456</span></a><span class="sd">        the static `save_df_to_xlsx` method for each.</span>
</span><span id="ExperimentProcessData.save_all_data-457"><a href="#ExperimentProcessData.save_all_data-457"><span class="linenos">457</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.save_all_data-458"><a href="#ExperimentProcessData.save_all_data-458"><span class="linenos">458</span></a>        <span class="n">dataframes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ExperimentProcessData.save_all_data-459"><a href="#ExperimentProcessData.save_all_data-459"><span class="linenos">459</span></a>            <span class="s2">&quot;Experiment Schedule&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">program_schedule_df</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_all_data-460"><a href="#ExperimentProcessData.save_all_data-460"><span class="linenos">460</span></a>            <span class="s2">&quot;Detailed Event Log Data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_data</span><span class="o">.</span><span class="n">event_dataframe</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_all_data-461"><a href="#ExperimentProcessData.save_all_data-461"><span class="linenos">461</span></a>        <span class="p">}</span>
</span><span id="ExperimentProcessData.save_all_data-462"><a href="#ExperimentProcessData.save_all_data-462"><span class="linenos">462</span></a>
</span><span id="ExperimentProcessData.save_all_data-463"><a href="#ExperimentProcessData.save_all_data-463"><span class="linenos">463</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span> <span class="ow">in</span> <span class="n">dataframes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="ExperimentProcessData.save_all_data-464"><a href="#ExperimentProcessData.save_all_data-464"><span class="linenos">464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">df_reference</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Saves the experiment schedule and detailed event log DataFrames to Excel files.</p>

<p>Iterates through a dictionary mapping descriptive names to the DataFrame
references (<code><a href="#ExperimentProcessData.program_schedule_df">program_schedule_df</a></code>, <code>event_data.event_dataframe</code>) and calls
the static <code><a href="#ExperimentProcessData.save_df_to_xlsx">save_df_to_xlsx</a></code> method for each.</p>
</div>


                            </div>
                            <div id="ExperimentProcessData.get_paired_index" class="classattr">
                                        <input id="ExperimentProcessData.get_paired_index-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">get_paired_index</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">num_stimuli</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.get_paired_index-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.get_paired_index"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.get_paired_index-466"><a href="#ExperimentProcessData.get_paired_index-466"><span class="linenos">466</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData.get_paired_index-467"><a href="#ExperimentProcessData.get_paired_index-467"><span class="linenos">467</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_paired_index</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_stimuli</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-468"><a href="#ExperimentProcessData.get_paired_index-468"><span class="linenos">468</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.get_paired_index-469"><a href="#ExperimentProcessData.get_paired_index-469"><span class="linenos">469</span></a><span class="sd">        Calculates the 0-indexed valve number for the stimulus for side two based on give index (i) for side one.</span>
</span><span id="ExperimentProcessData.get_paired_index-470"><a href="#ExperimentProcessData.get_paired_index-470"><span class="linenos">470</span></a>
</span><span id="ExperimentProcessData.get_paired_index-471"><a href="#ExperimentProcessData.get_paired_index-471"><span class="linenos">471</span></a><span class="sd">        Based on the total number of stimuli (`num_stimuli`), determines the index</span>
</span><span id="ExperimentProcessData.get_paired_index-472"><a href="#ExperimentProcessData.get_paired_index-472"><span class="linenos">472</span></a><span class="sd">        of the valve paired with the valve at index `i`. Handles cases for 2, 4, or 8 total stimuli.</span>
</span><span id="ExperimentProcessData.get_paired_index-473"><a href="#ExperimentProcessData.get_paired_index-473"><span class="linenos">473</span></a>
</span><span id="ExperimentProcessData.get_paired_index-474"><a href="#ExperimentProcessData.get_paired_index-474"><span class="linenos">474</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.get_paired_index-475"><a href="#ExperimentProcessData.get_paired_index-475"><span class="linenos">475</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.get_paired_index-476"><a href="#ExperimentProcessData.get_paired_index-476"><span class="linenos">476</span></a><span class="sd">        - **i** (*int*): The 0-indexed number of the valve on one side.</span>
</span><span id="ExperimentProcessData.get_paired_index-477"><a href="#ExperimentProcessData.get_paired_index-477"><span class="linenos">477</span></a><span class="sd">        - **num_stimuli** (*int*): The total number of stimuli/valves being used (must be 2, 4, or 8).</span>
</span><span id="ExperimentProcessData.get_paired_index-478"><a href="#ExperimentProcessData.get_paired_index-478"><span class="linenos">478</span></a>
</span><span id="ExperimentProcessData.get_paired_index-479"><a href="#ExperimentProcessData.get_paired_index-479"><span class="linenos">479</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.get_paired_index-480"><a href="#ExperimentProcessData.get_paired_index-480"><span class="linenos">480</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.get_paired_index-481"><a href="#ExperimentProcessData.get_paired_index-481"><span class="linenos">481</span></a><span class="sd">        - *int | None*: The 0-indexed number of the paired valve, or None if `num_stimuli` is not 2, 4, or 8.</span>
</span><span id="ExperimentProcessData.get_paired_index-482"><a href="#ExperimentProcessData.get_paired_index-482"><span class="linenos">482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.get_paired_index-483"><a href="#ExperimentProcessData.get_paired_index-483"><span class="linenos">483</span></a>        <span class="k">match</span> <span class="n">num_stimuli</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-484"><a href="#ExperimentProcessData.get_paired_index-484"><span class="linenos">484</span></a>            <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-485"><a href="#ExperimentProcessData.get_paired_index-485"><span class="linenos">485</span></a>                <span class="c1"># if num stim is 2, we are only running the same stimulus on both sides,</span>
</span><span id="ExperimentProcessData.get_paired_index-486"><a href="#ExperimentProcessData.get_paired_index-486"><span class="linenos">486</span></a>                <span class="c1"># we will only see i=0 here, and its paired with its sibling i=4</span>
</span><span id="ExperimentProcessData.get_paired_index-487"><a href="#ExperimentProcessData.get_paired_index-487"><span class="linenos">487</span></a>                <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">4</span>
</span><span id="ExperimentProcessData.get_paired_index-488"><a href="#ExperimentProcessData.get_paired_index-488"><span class="linenos">488</span></a>            <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-489"><a href="#ExperimentProcessData.get_paired_index-489"><span class="linenos">489</span></a>                <span class="c1"># if num stim is 4, we are only running 2 stimuli per side,</span>
</span><span id="ExperimentProcessData.get_paired_index-490"><a href="#ExperimentProcessData.get_paired_index-490"><span class="linenos">490</span></a>                <span class="c1"># we will see i=0 and i =1 here, paired with siblings i=5 &amp; i=4 respectively</span>
</span><span id="ExperimentProcessData.get_paired_index-491"><a href="#ExperimentProcessData.get_paired_index-491"><span class="linenos">491</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-492"><a href="#ExperimentProcessData.get_paired_index-492"><span class="linenos">492</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># valve 1</span>
</span><span id="ExperimentProcessData.get_paired_index-493"><a href="#ExperimentProcessData.get_paired_index-493"><span class="linenos">493</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>  <span class="c1"># (5) / valve 6</span>
</span><span id="ExperimentProcessData.get_paired_index-494"><a href="#ExperimentProcessData.get_paired_index-494"><span class="linenos">494</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># valve 2</span>
</span><span id="ExperimentProcessData.get_paired_index-495"><a href="#ExperimentProcessData.get_paired_index-495"><span class="linenos">495</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># (4) / valve 5</span>
</span><span id="ExperimentProcessData.get_paired_index-496"><a href="#ExperimentProcessData.get_paired_index-496"><span class="linenos">496</span></a>            <span class="k">case</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-497"><a href="#ExperimentProcessData.get_paired_index-497"><span class="linenos">497</span></a>                <span class="k">match</span> <span class="n">i</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-498"><a href="#ExperimentProcessData.get_paired_index-498"><span class="linenos">498</span></a>                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-499"><a href="#ExperimentProcessData.get_paired_index-499"><span class="linenos">499</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="ExperimentProcessData.get_paired_index-500"><a href="#ExperimentProcessData.get_paired_index-500"><span class="linenos">500</span></a>                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-501"><a href="#ExperimentProcessData.get_paired_index-501"><span class="linenos">501</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData.get_paired_index-502"><a href="#ExperimentProcessData.get_paired_index-502"><span class="linenos">502</span></a>                    <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-503"><a href="#ExperimentProcessData.get_paired_index-503"><span class="linenos">503</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
</span><span id="ExperimentProcessData.get_paired_index-504"><a href="#ExperimentProcessData.get_paired_index-504"><span class="linenos">504</span></a>                    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-505"><a href="#ExperimentProcessData.get_paired_index-505"><span class="linenos">505</span></a>                        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span>
</span><span id="ExperimentProcessData.get_paired_index-506"><a href="#ExperimentProcessData.get_paired_index-506"><span class="linenos">506</span></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
</span><span id="ExperimentProcessData.get_paired_index-507"><a href="#ExperimentProcessData.get_paired_index-507"><span class="linenos">507</span></a>                <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Calculates the 0-indexed valve number for the stimulus for side two based on give index (i) for side one.</p>

<p>Based on the total number of stimuli (<code>num_stimuli</code>), determines the index
of the valve paired with the valve at index <code>i</code>. Handles cases for 2, 4, or 8 total stimuli.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>i</strong> (<em>int</em>): The 0-indexed number of the valve on one side.</li>
<li><strong>num_stimuli</strong> (<em>int</em>): The total number of stimuli/valves being used (must be 2, 4, or 8).</li>
</ul>

<h2 id="returns">Returns</h2>

<ul>
<li><em>int | None</em>: The 0-indexed number of the paired valve, or None if <code>num_stimuli</code> is not 2, 4, or 8.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.save_df_to_xlsx" class="classattr">
                                        <input id="ExperimentProcessData.save_df_to_xlsx-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">save_df_to_xlsx</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">dataframe</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.save_df_to_xlsx-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.save_df_to_xlsx"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.save_df_to_xlsx-509"><a href="#ExperimentProcessData.save_df_to_xlsx-509"><span class="linenos">509</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-510"><a href="#ExperimentProcessData.save_df_to_xlsx-510"><span class="linenos">510</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_df_to_xlsx</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-511"><a href="#ExperimentProcessData.save_df_to_xlsx-511"><span class="linenos">511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-512"><a href="#ExperimentProcessData.save_df_to_xlsx-512"><span class="linenos">512</span></a><span class="sd">        Saves a pandas DataFrame to an Excel (.xlsx) file using a file save dialog.</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-513"><a href="#ExperimentProcessData.save_df_to_xlsx-513"><span class="linenos">513</span></a>
</span><span id="ExperimentProcessData.save_df_to_xlsx-514"><a href="#ExperimentProcessData.save_df_to_xlsx-514"><span class="linenos">514</span></a><span class="sd">        Prompts the user with a standard &#39;Save As&#39; dialog window. Suggests a default</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-515"><a href="#ExperimentProcessData.save_df_to_xlsx-515"><span class="linenos">515</span></a><span class="sd">        filename including the provided `name` and the current date. Sets the default</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-516"><a href="#ExperimentProcessData.save_df_to_xlsx-516"><span class="linenos">516</span></a><span class="sd">        directory to &#39;../data_outputs&#39;. If the user confirms a filename, saves the</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-517"><a href="#ExperimentProcessData.save_df_to_xlsx-517"><span class="linenos">517</span></a><span class="sd">        DataFrame; otherwise, logs that the save was cancelled.</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-518"><a href="#ExperimentProcessData.save_df_to_xlsx-518"><span class="linenos">518</span></a>
</span><span id="ExperimentProcessData.save_df_to_xlsx-519"><a href="#ExperimentProcessData.save_df_to_xlsx-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-520"><a href="#ExperimentProcessData.save_df_to_xlsx-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-521"><a href="#ExperimentProcessData.save_df_to_xlsx-521"><span class="linenos">521</span></a><span class="sd">        - **name** (*str*): A descriptive name used in the default filename (e.g., &quot;Experiment Schedule&quot;).</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-522"><a href="#ExperimentProcessData.save_df_to_xlsx-522"><span class="linenos">522</span></a><span class="sd">        - **dataframe** (*pd.DataFrame*): The pandas DataFrame to be saved.</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-523"><a href="#ExperimentProcessData.save_df_to_xlsx-523"><span class="linenos">523</span></a>
</span><span id="ExperimentProcessData.save_df_to_xlsx-524"><a href="#ExperimentProcessData.save_df_to_xlsx-524"><span class="linenos">524</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-525"><a href="#ExperimentProcessData.save_df_to_xlsx-525"><span class="linenos">525</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-526"><a href="#ExperimentProcessData.save_df_to_xlsx-526"><span class="linenos">526</span></a><span class="sd">        - Propagates errors from `filedialog.asksaveasfilename` or `dataframe.to_excel`.</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-527"><a href="#ExperimentProcessData.save_df_to_xlsx-527"><span class="linenos">527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-528"><a href="#ExperimentProcessData.save_df_to_xlsx-528"><span class="linenos">528</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-529"><a href="#ExperimentProcessData.save_df_to_xlsx-529"><span class="linenos">529</span></a>            <span class="n">file_name</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-530"><a href="#ExperimentProcessData.save_df_to_xlsx-530"><span class="linenos">530</span></a>                <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.xlsx&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-531"><a href="#ExperimentProcessData.save_df_to_xlsx-531"><span class="linenos">531</span></a>                <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Excel Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.xlsx&quot;</span><span class="p">)],</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-532"><a href="#ExperimentProcessData.save_df_to_xlsx-532"><span class="linenos">532</span></a>                <span class="n">initialfile</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-533"><a href="#ExperimentProcessData.save_df_to_xlsx-533"><span class="linenos">533</span></a>                <span class="n">initialdir</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-534"><a href="#ExperimentProcessData.save_df_to_xlsx-534"><span class="linenos">534</span></a>                <span class="o">/</span> <span class="s2">&quot;data_outputs&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-535"><a href="#ExperimentProcessData.save_df_to_xlsx-535"><span class="linenos">535</span></a>                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save Excel file&quot;</span><span class="p">,</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-536"><a href="#ExperimentProcessData.save_df_to_xlsx-536"><span class="linenos">536</span></a>            <span class="p">)</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-537"><a href="#ExperimentProcessData.save_df_to_xlsx-537"><span class="linenos">537</span></a>
</span><span id="ExperimentProcessData.save_df_to_xlsx-538"><a href="#ExperimentProcessData.save_df_to_xlsx-538"><span class="linenos">538</span></a>            <span class="k">if</span> <span class="n">file_name</span><span class="p">:</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-539"><a href="#ExperimentProcessData.save_df_to_xlsx-539"><span class="linenos">539</span></a>                <span class="n">dataframe</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-540"><a href="#ExperimentProcessData.save_df_to_xlsx-540"><span class="linenos">540</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-541"><a href="#ExperimentProcessData.save_df_to_xlsx-541"><span class="linenos">541</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User cancelled saving the stimuli dataframe.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-542"><a href="#ExperimentProcessData.save_df_to_xlsx-542"><span class="linenos">542</span></a>
</span><span id="ExperimentProcessData.save_df_to_xlsx-543"><a href="#ExperimentProcessData.save_df_to_xlsx-543"><span class="linenos">543</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Data saved to xlsx files.&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-544"><a href="#ExperimentProcessData.save_df_to_xlsx-544"><span class="linenos">544</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-545"><a href="#ExperimentProcessData.save_df_to_xlsx-545"><span class="linenos">545</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving data to xlsx: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.save_df_to_xlsx-546"><a href="#ExperimentProcessData.save_df_to_xlsx-546"><span class="linenos">546</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Saves a pandas DataFrame to an Excel (.xlsx) file using a file save dialog.</p>

<p>Prompts the user with a standard 'Save As' dialog window. Suggests a default
filename including the provided <code>name</code> and the current date. Sets the default
directory to '../data_outputs'. If the user confirms a filename, saves the
DataFrame; otherwise, logs that the save was cancelled.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>name</strong> (<em>str</em>): A descriptive name used in the default filename (e.g., "Experiment Schedule").</li>
<li><strong>dataframe</strong> (<em>pd.DataFrame</em>): The pandas DataFrame to be saved.</li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates errors from <code>filedialog.asksaveasfilename</code> or <code>dataframe.to_excel</code>.</li>
</ul>
</div>


                            </div>
                            <div id="ExperimentProcessData.convert_seconds_to_minutes_seconds" class="classattr">
                                        <input id="ExperimentProcessData.convert_seconds_to_minutes_seconds-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">convert_seconds_to_minutes_seconds</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">total_seconds</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExperimentProcessData.convert_seconds_to_minutes_seconds-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExperimentProcessData.convert_seconds_to_minutes_seconds"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-548"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-548"><span class="linenos">548</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-549"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_seconds_to_minutes_seconds</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-550"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-551"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-551"><span class="linenos">551</span></a><span class="sd">        Converts a total number of seconds into whole minutes and remaining seconds.</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-552"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-552"><span class="linenos">552</span></a>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-553"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-553"><span class="linenos">553</span></a><span class="sd">        Parameters</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-554"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-554"><span class="linenos">554</span></a><span class="sd">        ----------</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-555"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-555"><span class="linenos">555</span></a><span class="sd">        - **total_seconds** (*int*): The total duration in seconds.</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-556"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-556"><span class="linenos">556</span></a>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-557"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-557"><span class="linenos">557</span></a><span class="sd">        Returns</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-558"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-558"><span class="linenos">558</span></a><span class="sd">        -------</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-559"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-559"><span class="linenos">559</span></a><span class="sd">        - *tuple[int, int]*: A tuple containing (minutes, seconds).</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-560"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-560"><span class="linenos">560</span></a>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-561"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-561"><span class="linenos">561</span></a><span class="sd">        Raises</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-562"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-562"><span class="linenos">562</span></a><span class="sd">        ------</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-563"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-563"><span class="linenos">563</span></a><span class="sd">        - Propagates `TypeError` if `total_seconds` is not a number.</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-564"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-564"><span class="linenos">564</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-565"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-565"><span class="linenos">565</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-566"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-566"><span class="linenos">566</span></a>            <span class="c1"># Integer division to get whole minutes</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-567"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-567"><span class="linenos">567</span></a>            <span class="n">minutes</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">//</span> <span class="mi">60</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-568"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-568"><span class="linenos">568</span></a>            <span class="c1"># Modulo to get remaining seconds</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-569"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-569"><span class="linenos">569</span></a>            <span class="n">seconds</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">%</span> <span class="mi">60</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-570"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-570"><span class="linenos">570</span></a>            <span class="k">return</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-571"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-571"><span class="linenos">571</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-572"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-572"><span class="linenos">572</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error converting seconds to minutes and seconds: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ExperimentProcessData.convert_seconds_to_minutes_seconds-573"><a href="#ExperimentProcessData.convert_seconds_to_minutes_seconds-573"><span class="linenos">573</span></a>            <span class="k">raise</span>
</span></pre></div>


            <div class="docstring"><p>Converts a total number of seconds into whole minutes and remaining seconds.</p>

<h2 id="parameters">Parameters</h2>

<ul>
<li><strong>total_seconds</strong> (<em>int</em>): The total duration in seconds.</li>
</ul>

<h2 id="returns">Returns</h2>

<ul>
<li><em>tuple[int, int]</em>: A tuple containing (minutes, seconds).</li>
</ul>

<h2 id="raises">Raises</h2>

<ul>
<li>Propagates <code>TypeError</code> if <code>total_seconds</code> is not a number.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>